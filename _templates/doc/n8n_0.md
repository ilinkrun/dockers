## install

```sh
npm install -g n8n
npm install -g axios jnu-abc jnu-doc jnu-cloud
```

## 환경 설정

> `/var/services/homes/jungsam/dockers/platforms/ubuntu-ilmac/configs/.bashrc`

```ini
## nodejs
export NODE_PATH=/root/.nvm/versions/node/v22.19.0/lib/node_modules:/root/.n8n/node_modules

## n8n
### 기본
export N8N_PORT=21021
export N8N_HOST=0.0.0.0
export N8N_PROTOCOL=http

export N8N_SECURE_COOKIE=false
export NODE_FUNCTION_ALLOW_EXTERNAL=axios,jnu-abc,jnu-doc,jnu-cloud

### Task Runner 메모리 설정
export N8N_RUNNERS_MAX_OLD_SPACE_SIZE=2048
export N8N_RUNNERS_MAX_PAYLOAD=1024

### Task Runner 설정
export N8N_RUNNERS_ENABLED=false
export N8N_RUNNERS_MODE=internal
export N8N_RUNNERS_PATH=/tmp/n8n-runners

### 기타 설정
export DB_SQLITE_POOL_SIZE=2
export N8N_BLOCK_ENV_ACCESS_IN_NODE=false
export N8N_GIT_NODE_DISABLE_BARE_REPOS=true
export N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
```

---

## n8n start

```sh
n8n start
```

activate key: bc320447-4220-4963-a629-c26b6bca190a
user: ilinkrun@gmail.com / An*********

---

## workflow(code)

### axios
```js
// JSON API 사용 예시
const axios = require('axios');

try {
  // JSON을 반환하는 API 사용
  const response = await axios.get('https://jsonplaceholder.typicode.com/posts/1');
  
  // response.data가 이미 객체이므로 바로 사용 가능
  return [{ json: response.data }];
} catch (error) {
  return [{ json: { error: error.message } }];
}
```

### jnu-abc

#### ping
```js
const abc = require('jnu-abc/cjs/basic');
const res = abc.ping()
return [{ json: {res: res}}];
```


#### findFiles

```js
const abc = require('jnu-abc/cjs/builtin');
// const res = abc.ping()
const res = abc.findFiles('/nas/homes/jungsam/apps/scripts')

return [{ json: {res: res}}];
```

===