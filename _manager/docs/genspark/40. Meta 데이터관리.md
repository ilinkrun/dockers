> https://www.genspark.ai/agents?id=4cf21a58-65f5-406f-85f6-37f4ac135af7

"""
mysql í…Œì´ë¸”ì˜ ì»¬ëŸ¼ë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ mappings_column í…Œì´ë¸”ì— ì €ì¥í•´ë‘ê³ , mysql ì»¬ëŸ¼ëª…ê³¼ graphql typeì„ ë§¤ì¹˜ì‹œí‚¤ê±°ë‚˜, ì›¹í˜ì´ì§€ì˜ í…Œì´ë¸”ì„ ê·¸ë¦¬ê±°ë‚˜ ì…ë ¥í¼ì— ë¼ë²¨(í•œê¸€)ì„ í‘œì‹œí•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ë ¤ê³  í•´ìš”.
ì•„ë˜ì™€ ê°™ì€ ì»¬ëŸ¼ë“¤ì´ë©´ ë ê¹Œìš”? ì¶”ê°€í•´ì•¼ í•  ì»¬ëŸ¼ì´ ìˆê±°ë‚˜, ì´ë¦„ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì‚­ì œí•  ê²ƒì´ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ê³ , create ë¬¸ì„ ë³´ì—¬ì£¼ì„¸ìš”.

- id,table,mysql,graphql,label,comment,remark

- id: ìë™ìƒì„±
- table: í…Œì´ë¸” ì´ë¦„
- mysql: mysql ì»¬ëŸ¼ëª…
- graphql: graphql í‚¤ì´ë¦„
- label: í•œê¸€ í‘œì‹œì´ë¦„(í‘œ, ì…ë ¥í¼ ë“±)
- comment: mysql ì»¬ëŸ¼ ì •ë³´ì— ìˆëŠ” ì½”ë©˜íŠ¸
- remark: ë¹„ê³ 
"""

ì œì•ˆí•´ì£¼ì‹  ì»¬ëŸ¼ êµ¬ì¡°ë¥¼ ë¶„ì„í•œ ê²°ê³¼, ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” ì¢‹ì§€ë§Œ ì‹¤ì œ ìš´ì˜ì—ì„œ í•„ìš”í•  ë§Œí•œ ëª‡ ê°€ì§€ ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ê³  ì¼ë¶€ ì»¬ëŸ¼ëª…ì„ ê°œì„ í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.

## ìˆ˜ì • ì œì•ˆì‚¬í•­

### ì¶”ê°€ê°€ í•„ìš”í•œ ì»¬ëŸ¼ë“¤:
1. **mysql_type**: MySQL ë°ì´í„° íƒ€ì… (VARCHAR(100), INT, DATETIME ë“±)
2. **graphql_type**: GraphQL íƒ€ì… (String, Int, DateTime ë“±)
3. **is_required**: í•„ìˆ˜ ì—¬ë¶€ (Boolean)
4. **form_type**: ì…ë ¥ í¼ íƒ€ì… (text, select, checkbox, date ë“±)
5. **sort_order**: í‘œì‹œ ìˆœì„œ
6. **is_visible**: í‘œì‹œ ì—¬ë¶€ (í…Œì´ë¸”/í¼ì—ì„œ ìˆ¨ê¹€ ì²˜ë¦¬ìš©)
7. **created_at**, **updated_at**: ìƒì„±/ìˆ˜ì • ì‹œê°„

### ì»¬ëŸ¼ëª… ìˆ˜ì • ì œì•ˆ:
- `table` â†’ `table_name` (ì˜ˆì•½ì–´ ì¶©ëŒ ë°©ì§€)
- `mysql` â†’ `mysql_column` (ë” ëª…í™•í•œ ì˜ë¯¸)
- `graphql` â†’ `graphql_field` (ë” ëª…í™•í•œ ì˜ë¯¸)

## CREATE ë¬¸

```sql
CREATE TABLE mappings_column (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    table_name VARCHAR(100) NOT NULL COMMENT 'í…Œì´ë¸” ì´ë¦„',
    mysql_column VARCHAR(100) NOT NULL COMMENT 'MySQL ì»¬ëŸ¼ëª…',
    mysql_type VARCHAR(100) NULL COMMENT 'MySQL ë°ì´í„° íƒ€ì…',
    graphql_field VARCHAR(100) NULL COMMENT 'GraphQL í•„ë“œëª…',
    graphql_type VARCHAR(50) NULL COMMENT 'GraphQL íƒ€ì…',
    label VARCHAR(200) NOT NULL COMMENT 'í•œê¸€ í‘œì‹œëª… (UIìš©)',
    form_type VARCHAR(50) DEFAULT 'text' COMMENT 'ì…ë ¥ í¼ íƒ€ì… (text, select, checkbox, date ë“±)',
    is_required BOOLEAN DEFAULT FALSE COMMENT 'í•„ìˆ˜ ì…ë ¥ ì—¬ë¶€',
    is_visible BOOLEAN DEFAULT TRUE COMMENT 'í™”ë©´ í‘œì‹œ ì—¬ë¶€',
    sort_order INT DEFAULT 0 COMMENT 'í‘œì‹œ ìˆœì„œ',
    comment TEXT NULL COMMENT 'MySQL ì»¬ëŸ¼ ì½”ë©˜íŠ¸',
    remark TEXT NULL COMMENT 'ë¹„ê³ ',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    
    UNIQUE KEY uk_table_mysql_column (table_name, mysql_column),
    INDEX idx_table_name (table_name),
    INDEX idx_sort_order (sort_order)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci 
COMMENT='í…Œì´ë¸” ì»¬ëŸ¼ ë§¤í•‘ ì •ë³´ ê´€ë¦¬';
```

## ì£¼ìš” ê°œì„ ì‚¬í•­

1. **ë°ì´í„° íƒ€ì… ì •ë³´ ì¶”ê°€**: MySQLê³¼ GraphQL íƒ€ì…ì„ ë³„ë„ë¡œ ê´€ë¦¬í•˜ì—¬ íƒ€ì… ë³€í™˜ ë¡œì§ì— í™œìš©
2. **í¼ ê´€ë ¨ ì •ë³´**: `form_type`, `is_required` ë“±ìœ¼ë¡œ ë™ì  í¼ ìƒì„± ì§€ì›
3. **í‘œì‹œ ì œì–´**: `is_visible`, `sort_order`ë¡œ í™”ë©´ í‘œì‹œ ì œì–´
4. **ì¸ë±ìŠ¤ ìµœì í™”**: ìì£¼ ì¡°íšŒë  `table_name`ê³¼ ì •ë ¬ìš© `sort_order`ì— ì¸ë±ìŠ¤ ì¶”ê°€
5. **ìœ ë‹ˆí¬ ì œì•½**: ê°™ì€ í…Œì´ë¸” ë‚´ ì»¬ëŸ¼ëª… ì¤‘ë³µ ë°©ì§€
6. **íƒ€ì„ìŠ¤íƒ¬í”„**: ë³€ê²½ ì´ë ¥ ì¶”ì ìš©

ì´ë ‡ê²Œ êµ¬ì„±í•˜ì‹œë©´ ë‹¨ìˆœí•œ ë§¤í•‘ë¿ë§Œ ì•„ë‹ˆë¼ ë™ì  UI ìƒì„±ê¹Œì§€ ì§€ì›í•  ìˆ˜ ìˆëŠ” ë” ìœ ì—°í•œ êµ¬ì¡°ê°€ ë©ë‹ˆë‹¤.

===

"""
defaultê°’ì´ ë¼ë“ ì§€, enum ì¸ ê²½ìš°ì˜ ê°’ ì œí•œ ë“±ì— ëŒ€í•œ ì»¬ëŸ¼ë„ í•„ìš”í• ê¹Œìš”?
"""

ë„¤, ì ˆëŒ€ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤! ì‹¤ì œ ìš´ì˜ì—ì„œëŠ” ì´ëŸ° ì œì•½ì¡°ê±´ë“¤ì´ ë§¤ìš° ì¤‘ìš”í•˜ì£ . ë‹¤ìŒ ì»¬ëŸ¼ë“¤ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤:

## ì¶”ê°€í•  ì»¬ëŸ¼ë“¤

### ê¸°ë³¸ê°’ ë° ì œì•½ì¡°ê±´:
1. **default_value**: ê¸°ë³¸ê°’
2. **enum_options**: enum/select ì˜µì…˜ë“¤ (JSON í˜•íƒœ)
3. **validation_rules**: ê¸°íƒ€ validation ê·œì¹™ (JSON í˜•íƒœ)

### UI ê´€ë ¨:
4. **placeholder**: ì…ë ¥ í¼ placeholder í…ìŠ¤íŠ¸  
5. **help_text**: ë„ì›€ë§ í…ìŠ¤íŠ¸

## ê°œì„ ëœ CREATE ë¬¸

```sql
CREATE TABLE mappings_column (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    table_name VARCHAR(100) NOT NULL COMMENT 'í…Œì´ë¸” ì´ë¦„',
    mysql_column VARCHAR(100) NOT NULL COMMENT 'MySQL ì»¬ëŸ¼ëª…',
    mysql_type VARCHAR(100) NULL COMMENT 'MySQL ë°ì´í„° íƒ€ì…',
    graphql_field VARCHAR(100) NULL COMMENT 'GraphQL í•„ë“œëª…',
    graphql_type VARCHAR(50) NULL COMMENT 'GraphQL íƒ€ì…',
    label VARCHAR(200) NOT NULL COMMENT 'í•œê¸€ í‘œì‹œëª… (UIìš©)',
    form_type VARCHAR(50) DEFAULT 'text' COMMENT 'ì…ë ¥ í¼ íƒ€ì… (text, select, checkbox, date, textarea ë“±)',
    is_required BOOLEAN DEFAULT FALSE COMMENT 'í•„ìˆ˜ ì…ë ¥ ì—¬ë¶€',
    is_visible BOOLEAN DEFAULT TRUE COMMENT 'í™”ë©´ í‘œì‹œ ì—¬ë¶€',
    sort_order INT DEFAULT 0 COMMENT 'í‘œì‹œ ìˆœì„œ',
    
    -- ê¸°ë³¸ê°’ ë° ì œì•½ì¡°ê±´
    default_value TEXT NULL COMMENT 'ê¸°ë³¸ê°’',
    enum_options JSON NULL COMMENT 'enum/select ì˜µì…˜ [{"value":"Y","label":"ì˜ˆ"},{"value":"N","label":"ì•„ë‹ˆì˜¤"}]',
    validation_rules JSON NULL COMMENT 'validation ê·œì¹™ {"minLength":2,"maxLength":50,"pattern":"^[a-zA-Z]+$"}',
    
    -- UI ê´€ë ¨
    placeholder VARCHAR(200) NULL COMMENT 'ì…ë ¥ í¼ placeholder',
    help_text TEXT NULL COMMENT 'ë„ì›€ë§ í…ìŠ¤íŠ¸',
    
    comment TEXT NULL COMMENT 'MySQL ì»¬ëŸ¼ ì½”ë©˜íŠ¸',
    remark TEXT NULL COMMENT 'ë¹„ê³ ',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    
    UNIQUE KEY uk_table_mysql_column (table_name, mysql_column),
    INDEX idx_table_name (table_name),
    INDEX idx_sort_order (sort_order)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci 
COMMENT='í…Œì´ë¸” ì»¬ëŸ¼ ë§¤í•‘ ì •ë³´ ê´€ë¦¬';
```

## ì‚¬ìš© ì˜ˆì‹œ

### enum_options JSON ì˜ˆì‹œ:
```json
[
  {"value": "Y", "label": "ì˜ˆ"},
  {"value": "N", "label": "ì•„ë‹ˆì˜¤"}
]

[
  {"value": "ACTIVE", "label": "í™œì„±"},
  {"value": "INACTIVE", "label": "ë¹„í™œì„±"},
  {"value": "PENDING", "label": "ëŒ€ê¸°ì¤‘"}
]
```

### validation_rules JSON ì˜ˆì‹œ:
```json
{
  "minLength": 2,
  "maxLength": 50,
  "pattern": "^[a-zA-Zê°€-í£]+$",
  "required": true
}

{
  "min": 0,
  "max": 100,
  "step": 0.1
}
```

### ì‹¤ì œ ë°ì´í„° ì˜ˆì‹œ:
```sql
INSERT INTO mappings_column VALUES (
  1, 'users', 'status', 'VARCHAR(20)', 'status', 'String', 
  'ìƒíƒœ', 'select', true, true, 10,
  'ACTIVE', 
  '[{"value":"ACTIVE","label":"í™œì„±"},{"value":"INACTIVE","label":"ë¹„í™œì„±"}]',
  '{"required":true}',
  'ìƒíƒœë¥¼ ì„ íƒí•˜ì„¸ìš”', 'ì‚¬ìš©ìì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤',
  'ì‚¬ìš©ì ìƒíƒœ', null, NOW(), NOW()
);
```

ì´ë ‡ê²Œ í•˜ë©´ ì™„ì „í•œ ë™ì  í¼ ìƒì„±ê³¼ validationì´ ê°€ëŠ¥í•œ ë©”íƒ€ë°ì´í„° í…Œì´ë¸”ì´ ë©ë‹ˆë‹¤!

===

"""
ë°ì´í„°ë² ì´ìŠ¤ ë° graphql ì„¤ê³„ì‹œ mappings_column í…Œì´ë¸”ì— ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , ì´í›„ mysql í…Œì´ë¸” ìƒì„±/ìˆ˜ì •, graphql ìŠ¤í‚¤ë§ˆ, ë¦¬ì¡¸ë²„ ìƒì„±/ë³€ê²½, UI ìƒì„±ì‹œ ì°¸ê³  ë“±ì„ í•˜ëŠ”ë° í™œìš©í•  ìˆ˜ ìˆì„ê¹Œìš”?
"""

ë„¤, ì •ë§ í›Œë¥­í•œ ì ‘ê·¼ë²•ì…ë‹ˆë‹¤! **ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ê°œë°œ(Metadata-Driven Development)**ì´ë¼ê³  í•˜ëŠ”ë°, í˜„ì¬ í…Œì´ë¸” êµ¬ì¡°ë¡œë„ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ì§€ë§Œ ëª‡ ê°€ì§€ ì¶”ê°€ ê³ ë ¤ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.

## í˜„ì¬ êµ¬ì¡°ë¡œ ê°€ëŠ¥í•œ ê²ƒë“¤

âœ… **MySQL í…Œì´ë¸” ìƒì„±**
```sql
-- mappings_column ë°ì´í„° ê¸°ë°˜ DDL ìë™ ìƒì„±
CREATE TABLE users (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL COMMENT 'ì´ë¦„',
  status VARCHAR(20) DEFAULT 'ACTIVE' COMMENT 'ìƒíƒœ'
);
```

âœ… **GraphQL ìŠ¤í‚¤ë§ˆ ìƒì„±**
```graphql
# mappings_column ë°ì´í„° ê¸°ë°˜ ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±
type User {
  id: ID!
  name: String!
  status: String
}
```

âœ… **UI ì»´í¬ë„ŒíŠ¸ ìƒì„±**
```jsx
// mappings_column ë°ì´í„° ê¸°ë°˜ í¼ ìë™ ìƒì„±
<FormField 
  type="text" 
  label="ì´ë¦„" 
  required={true}
  placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
/>
```

## ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### 1. í…Œì´ë¸” ë ˆë²¨ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” ì¶”ê°€
```sql
CREATE TABLE mappings_table (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    table_name VARCHAR(100) NOT NULL UNIQUE,
    graphql_type VARCHAR(100) NULL COMMENT 'GraphQL íƒ€ì…ëª…',
    label VARCHAR(200) NOT NULL COMMENT 'í•œê¸€ í…Œì´ë¸”ëª…',
    description TEXT NULL COMMENT 'í…Œì´ë¸” ì„¤ëª…',
    primary_key VARCHAR(100) DEFAULT 'id' COMMENT 'ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª…',
    is_api_enabled BOOLEAN DEFAULT TRUE COMMENT 'API ë…¸ì¶œ ì—¬ë¶€',
    api_permissions JSON NULL COMMENT 'API ê¶Œí•œ ì„¤ì •',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT='í…Œì´ë¸” ë ˆë²¨ ë©”íƒ€ë°ì´í„°';
```

### 2. ê´€ê³„ ì •ë³´ í…Œì´ë¸” ì¶”ê°€
```sql
CREATE TABLE mappings_relation (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    from_table VARCHAR(100) NOT NULL,
    from_column VARCHAR(100) NOT NULL,
    to_table VARCHAR(100) NOT NULL,
    to_column VARCHAR(100) NOT NULL,
    relation_type ENUM('OneToOne', 'OneToMany', 'ManyToOne', 'ManyToMany') NOT NULL,
    graphql_field VARCHAR(100) NULL COMMENT 'GraphQL ê´€ê³„ í•„ë“œëª…',
    is_cascade_delete BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) COMMENT='í…Œì´ë¸” ê°„ ê´€ê³„ ì •ë³´';
```

### 3. mappings_column í…Œì´ë¸”ì— ì¶”ê°€í•  ì»¬ëŸ¼ë“¤
```sql
ALTER TABLE mappings_column ADD COLUMN (
    -- ì¸ë±ìŠ¤ ê´€ë ¨
    is_primary_key BOOLEAN DEFAULT FALSE COMMENT 'ê¸°ë³¸í‚¤ ì—¬ë¶€',
    is_unique BOOLEAN DEFAULT FALSE COMMENT 'ìœ ë‹ˆí¬ ì œì•½ ì—¬ë¶€',
    is_indexed BOOLEAN DEFAULT FALSE COMMENT 'ì¸ë±ìŠ¤ ìƒì„± ì—¬ë¶€',
    
    -- GraphQL ê´€ë ¨
    graphql_resolver TEXT NULL COMMENT 'ì»¤ìŠ¤í…€ ë¦¬ì¡¸ë²„ ë¡œì§',
    is_graphql_input BOOLEAN DEFAULT TRUE COMMENT 'GraphQL Input í¬í•¨ ì—¬ë¶€',
    is_graphql_output BOOLEAN DEFAULT TRUE COMMENT 'GraphQL Output í¬í•¨ ì—¬ë¶€',
    
    -- ë³´ì•ˆ/ê¶Œí•œ
    permission_read VARCHAR(100) DEFAULT 'public' COMMENT 'ì½ê¸° ê¶Œí•œ',
    permission_write VARCHAR(100) DEFAULT 'authenticated' COMMENT 'ì“°ê¸° ê¶Œí•œ',
    
    -- API ê´€ë ¨
    is_searchable BOOLEAN DEFAULT FALSE COMMENT 'ê²€ìƒ‰ ê°€ëŠ¥ ì—¬ë¶€',
    is_sortable BOOLEAN DEFAULT TRUE COMMENT 'ì •ë ¬ ê°€ëŠ¥ ì—¬ë¶€',
    is_filterable BOOLEAN DEFAULT TRUE COMMENT 'í•„í„° ê°€ëŠ¥ ì—¬ë¶€'
);
```

## ì½”ë“œ ìƒì„± ì˜ˆì‹œ

### 1. MySQL DDL ìƒì„±ê¸°
```javascript
function generateMySQLDDL(tableName) {
    const tableInfo = getTableInfo(tableName);
    const columns = getColumnMappings(tableName);
    
    let ddl = `CREATE TABLE ${tableName} (\n`;
    
    columns.forEach(col => {
        ddl += `  ${col.mysql_column} ${col.mysql_type}`;
        if (col.is_required) ddl += ' NOT NULL';
        if (col.default_value) ddl += ` DEFAULT '${col.default_value}'`;
        if (col.comment) ddl += ` COMMENT '${col.comment}'`;
        ddl += ',\n';
    });
    
    ddl += `  PRIMARY KEY (${tableInfo.primary_key})\n`;
    ddl += `) COMMENT='${tableInfo.description}';`;
    
    return ddl;
}
```

### 2. GraphQL ìŠ¤í‚¤ë§ˆ ìƒì„±ê¸°
```javascript
function generateGraphQLSchema(tableName) {
    const columns = getColumnMappings(tableName);
    const relations = getTableRelations(tableName);
    
    let schema = `type ${pascalCase(tableName)} {\n`;
    
    columns.forEach(col => {
        if (col.is_graphql_output) {
            const required = col.is_required ? '!' : '';
            schema += `  ${col.graphql_field}: ${col.graphql_type}${required}\n`;
        }
    });
    
    relations.forEach(rel => {
        schema += `  ${rel.graphql_field}: [${rel.to_table}]\n`;
    });
    
    schema += '}\n';
    return schema;
}
```

### 3. React í¼ ìƒì„±ê¸°
```javascript
function generateReactForm(tableName) {
    const columns = getColumnMappings(tableName)
        .filter(col => col.is_visible && col.form_type !== 'hidden');
    
    return columns.map(col => {
        const Component = getFormComponent(col.form_type);
        return (
            <Component
                key={col.mysql_column}
                name={col.mysql_column}
                label={col.label}
                required={col.is_required}
                placeholder={col.placeholder}
                defaultValue={col.default_value}
                options={col.enum_options}
                validation={col.validation_rules}
                helpText={col.help_text}
            />
        );
    });
}
```

## ì›Œí¬í”Œë¡œìš°

1. **ì„¤ê³„ ë‹¨ê³„**: mappings_table, mappings_column, mappings_relationì— ë©”íƒ€ë°ì´í„° ì…ë ¥
2. **ìƒì„± ë‹¨ê³„**: ì½”ë“œ ìƒì„±ê¸°ë¡œ DDL, GraphQL, UI ìë™ ìƒì„±
3. **ìš´ì˜ ë‹¨ê³„**: ë©”íƒ€ë°ì´í„° ë³€ê²½ ì‹œ ê´€ë ¨ ì½”ë“œ ìë™ ì—…ë°ì´íŠ¸
4. **ë²„ì „ ê´€ë¦¬**: ë©”íƒ€ë°ì´í„° ë³€ê²½ ì´ë ¥ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±

ì´ë ‡ê²Œ í•˜ë©´ **Single Source of Truth** ê¸°ë°˜ìœ¼ë¡œ ì¼ê´€ëœ ê°œë°œì´ ê°€ëŠ¥í•˜ê³ , ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ì „ì²´ ìŠ¤íƒì„ í•œ ë²ˆì— ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

===

"""
API ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²½ìš°, ì‘ë‹µ sourceì˜ keyì´ë¦„ ë“±ì— ëŒ€í•œ ì •ë³´ë¥¼  mappings_columnì— ì €ì¥í•  í•„ìš”ëŠ” ì—†ì„ê¹Œìš”?
"""

ì •ë§ ì¤‘ìš”í•œ í¬ì¸íŠ¸ì…ë‹ˆë‹¤! ì™¸ë¶€ API ì—°ë™ì´ë‚˜ ë°ì´í„° í†µí•© ì‹œì—ëŠ” **ì†ŒìŠ¤ ì‹œìŠ¤í…œì˜ í•„ë“œëª…ê³¼ ë‚´ë¶€ ì‹œìŠ¤í…œì˜ í•„ë“œëª… ë§¤í•‘**ì´ í•„ìˆ˜ì ì´ì£ . ë‹¤ìŒê³¼ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë“¤ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤:

## ì¶”ê°€ê°€ í•„ìš”í•œ API ê´€ë ¨ ì»¬ëŸ¼ë“¤

```sql
ALTER TABLE mappings_column ADD COLUMN (
    -- API ì†ŒìŠ¤ ê´€ë ¨
    api_source_key VARCHAR(200) NULL COMMENT 'ì™¸ë¶€ API ì‘ë‹µì˜ í‚¤ ì´ë¦„',
    api_source_path VARCHAR(500) NULL COMMENT 'JSON path (nested êµ¬ì¡°ìš©, ì˜ˆ: user.profile.name)',
    api_source_type VARCHAR(100) NULL COMMENT 'ì™¸ë¶€ APIì—ì„œì˜ ë°ì´í„° íƒ€ì…',
    
    -- ë°ì´í„° ë³€í™˜ ê´€ë ¨
    data_transformation JSON NULL COMMENT 'ë°ì´í„° ë³€í™˜ ê·œì¹™',
    is_api_field BOOLEAN DEFAULT FALSE COMMENT 'API ì‘ë‹µì— í¬í•¨ë˜ëŠ” í•„ë“œ ì—¬ë¶€',
    api_default_value TEXT NULL COMMENT 'API ì‘ë‹µì— ì—†ì„ ë•Œ ì‚¬ìš©í•  ê¸°ë³¸ê°’',
    
    -- API ì—”ë“œí¬ì¸íŠ¸ ê´€ë ¨
    api_endpoints JSON NULL COMMENT 'ì´ í•„ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡'
);
```

## ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

### 1. ì™¸ë¶€ API ì‘ë‹µê³¼ ë‚´ë¶€ ì‹œìŠ¤í…œ ë§¤í•‘
```json
// ì™¸ë¶€ API ì‘ë‹µ
{
  "user_info": {
    "full_name": "í™ê¸¸ë™",
    "birth_date": "1990-01-01",
    "contact": {
      "email_addr": "hong@example.com",
      "phone_num": "010-1234-5678"
    }
  },
  "account_status": "ACTIVE"
}

// mappings_column ì„¤ì • ì˜ˆì‹œ
```

```sql
INSERT INTO mappings_column VALUES 
(1, 'users', 'name', 'VARCHAR(100)', 'name', 'String', 'ì´ë¦„', 'text', 
 true, true, 10, null, null, null, null, null, null, null, NOW(), NOW(),
 'full_name', 'user_info.full_name', 'string', null, true, null, 
 '["getUserProfile", "getUserList"]'),

(2, 'users', 'email', 'VARCHAR(255)', 'email', 'String', 'ì´ë©”ì¼', 'email',
 false, true, 20, null, null, null, null, null, null, null, NOW(), NOW(),
 'email_addr', 'user_info.contact.email_addr', 'string', null, true, null,
 '["getUserProfile"]'),

(3, 'users', 'status', 'VARCHAR(20)', 'status', 'String', 'ìƒíƒœ', 'select',
 true, true, 30, 'ACTIVE', 
 '[{"value":"ACTIVE","label":"í™œì„±"},{"value":"INACTIVE","label":"ë¹„í™œì„±"}]',
 null, null, null, null, null, NOW(), NOW(),
 'account_status', 'account_status', 'string', 
 '{"mapping":{"ACTIVE":"í™œì„±","INACTIVE":"ë¹„í™œì„±"}}', true, 'PENDING',
 '["getUserProfile", "getUserList"]');
```

## ë°ì´í„° ë³€í™˜ ê·œì¹™ JSON ì˜ˆì‹œ

### 1. ë‹¨ìˆœ ê°’ ë³€í™˜
```json
{
  "type": "mapping",
  "rules": {
    "Y": true,
    "N": false
  }
}
```

### 2. ë‚ ì§œ í˜•ì‹ ë³€í™˜
```json
{
  "type": "date_format",
  "from": "YYYY-MM-DD",
  "to": "timestamp"
}
```

### 3. ë¬¸ìì—´ ì²˜ë¦¬
```json
{
  "type": "string_transform",
  "operations": [
    {"action": "trim"},
    {"action": "toLowerCase"},
    {"action": "replace", "from": "_", "to": "-"}
  ]
}
```

### 4. ë³µí•© ë³€í™˜
```json
{
  "type": "complex",
  "expression": "parseFloat(value) * 1000",
  "fallback": 0
}
```

## API ì‘ë‹µ ì²˜ë¦¬ ì½”ë“œ ìƒì„±

### 1. ìë™ ë§¤í•‘ í•¨ìˆ˜ ìƒì„±
```javascript
function generateApiMapper(tableName, apiEndpoint) {
    const columns = getColumnMappings(tableName)
        .filter(col => col.is_api_field && 
                col.api_endpoints?.includes(apiEndpoint));
    
    return function mapApiResponse(apiResponse) {
        const mapped = {};
        
        columns.forEach(col => {
            let value;
            
            // JSON pathë¡œ ê°’ ì¶”ì¶œ
            if (col.api_source_path) {
                value = getNestedValue(apiResponse, col.api_source_path);
            } else if (col.api_source_key) {
                value = apiResponse[col.api_source_key];
            }
            
            // ë°ì´í„° ë³€í™˜ ì ìš©
            if (col.data_transformation) {
                value = transformData(value, col.data_transformation);
            }
            
            // ê¸°ë³¸ê°’ ì²˜ë¦¬
            if (value === undefined && col.api_default_value) {
                value = col.api_default_value;
            }
            
            mapped[col.mysql_column] = value;
        });
        
        return mapped;
    };
}
```

### 2. GraphQL ë¦¬ì¡¸ë²„ ìƒì„±
```javascript
function generateGraphQLResolver(tableName) {
    return {
        async [tableName](parent, args, context) {
            // API í˜¸ì¶œ
            const apiResponse = await callExternalAPI(args);
            
            // ë§¤í•‘ ì ìš©
            const mapper = generateApiMapper(tableName, 'getUserProfile');
            const mappedData = mapper(apiResponse);
            
            // DB ì €ì¥ ë˜ëŠ” ì§ì ‘ ë°˜í™˜
            return mappedData;
        }
    };
}
```

## ì¶”ê°€ í…Œì´ë¸”: API ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬

```sql
CREATE TABLE mappings_api_endpoint (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    endpoint_name VARCHAR(100) NOT NULL UNIQUE,
    base_url VARCHAR(500) NOT NULL,
    method ENUM('GET', 'POST', 'PUT', 'DELETE') DEFAULT 'GET',
    headers JSON NULL COMMENT 'ê¸°ë³¸ í—¤ë”',
    auth_config JSON NULL COMMENT 'ì¸ì¦ ì„¤ì •',
    rate_limit_config JSON NULL COMMENT 'ì†ë„ ì œí•œ ì„¤ì •',
    timeout_ms INT DEFAULT 201000 COMMENT 'íƒ€ì„ì•„ì›ƒ(ms)',
    retry_config JSON NULL COMMENT 'ì¬ì‹œë„ ì„¤ì •',
    cache_config JSON NULL COMMENT 'ìºì‹œ ì„¤ì •',
    description TEXT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT='ì™¸ë¶€ API ì—”ë“œí¬ì¸íŠ¸ ì„¤ì •';
```

ì´ë ‡ê²Œ í•˜ë©´ **ì™„ì „í•œ ë°ì´í„° í†µí•© í”Œë«í¼**ì˜ ë©”íƒ€ë°ì´í„° ê´€ë¦¬ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤:

1. âœ… **ë‚´ë¶€ DB â†” GraphQL** ë§¤í•‘
2. âœ… **ì™¸ë¶€ API â†” ë‚´ë¶€ DB** ë§¤í•‘  
3. âœ… **ìë™ ë°ì´í„° ë³€í™˜** ë° ì •ê·œí™”
4. âœ… **API ì‘ë‹µ ì²˜ë¦¬ ì½”ë“œ** ìë™ ìƒì„±
5. âœ… **í†µí•© ë°ì´í„° íŒŒì´í”„ë¼ì¸** ê´€ë¦¬

ì •ë§ ê°•ë ¥í•œ ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ì•„í‚¤í…ì²˜ê°€ ë˜ê² ë„¤ìš”!

===

"""
ì´ì™€ ê°™ì€ ì‹œìŠ¤í…œì„ mysqlì´ ì•„ë‹ˆë¼ postgreSQL ê¸°ë°˜ìœ¼ë¡œ í•˜ë ¤ë©´?
"""

PostgreSQLë¡œ ë³€ê²½í•˜ë©´ ë” ê°•ë ¥í•œ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! MySQL ëŒ€ë¹„ PostgreSQLì˜ ì¥ì ë“¤ì„ í™œìš©í•œ ê°œì„ ëœ ì„¤ê³„ë¥¼ ì œì•ˆí•˜ê² ìŠµë‹ˆë‹¤.

## PostgreSQL ê¸°ë°˜ ë©”íƒ€ë°ì´í„° ì‹œìŠ¤í…œ ì„¤ê³„

### 1. ë©”ì¸ í…Œì´ë¸”ë“¤

```sql
-- í…Œì´ë¸” ë ˆë²¨ ë©”íƒ€ë°ì´í„°
CREATE TABLE mappings_table (
    id BIGSERIAL PRIMARY KEY,
    schema_name VARCHAR(100) NOT NULL DEFAULT 'public',
    table_name VARCHAR(100) NOT NULL,
    graphql_type VARCHAR(100),
    label VARCHAR(200) NOT NULL,
    description TEXT,
    primary_key VARCHAR(100) DEFAULT 'id',
    is_api_enabled BOOLEAN DEFAULT TRUE,
    api_permissions JSONB,
    table_constraints JSONB, -- CHECK, UNIQUE ë“±
    indexes JSONB, -- ì¸ë±ìŠ¤ ì •ì˜
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(schema_name, table_name)
);

-- ì»¬ëŸ¼ ë ˆë²¨ ë©”íƒ€ë°ì´í„° (ê°œì„ ëœ ë²„ì „)
CREATE TABLE mappings_column (
    id BIGSERIAL PRIMARY KEY,
    table_id BIGINT REFERENCES mappings_table(id) ON DELETE CASCADE,
    schema_name VARCHAR(100) NOT NULL,
    table_name VARCHAR(100) NOT NULL,
    
    -- ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
    pg_column VARCHAR(100) NOT NULL, -- PostgreSQL ì»¬ëŸ¼ëª…
    pg_type VARCHAR(100), -- PostgreSQL ë°ì´í„° íƒ€ì…
    pg_constraints JSONB, -- NOT NULL, CHECK ë“±
    
    -- GraphQL ê´€ë ¨
    graphql_field VARCHAR(100),
    graphql_type VARCHAR(50),
    graphql_resolver TEXT,
    is_graphql_input BOOLEAN DEFAULT TRUE,
    is_graphql_output BOOLEAN DEFAULT TRUE,
    
    -- UI ê´€ë ¨
    label VARCHAR(200) NOT NULL,
    form_type VARCHAR(50) DEFAULT 'text',
    is_required BOOLEAN DEFAULT FALSE,
    is_visible BOOLEAN DEFAULT TRUE,
    sort_order INTEGER DEFAULT 0,
    
    -- ê°’ ë° ê²€ì¦
    default_value TEXT,
    enum_options JSONB, -- [{"value":"Y","label":"ì˜ˆ"}]
    validation_rules JSONB, -- ë³µí•© validation ê·œì¹™
    
    -- UI ë„ì›€ë§
    placeholder VARCHAR(200),
    help_text TEXT,
    
    -- API ì†ŒìŠ¤ ê´€ë ¨
    api_source_key VARCHAR(200),
    api_source_path VARCHAR(500), -- JSONPath í‘œí˜„ì‹
    api_source_type VARCHAR(100),
    data_transformation JSONB, -- ë°ì´í„° ë³€í™˜ ê·œì¹™
    is_api_field BOOLEAN DEFAULT FALSE,
    api_default_value TEXT,
    api_endpoints JSONB, -- ì—°ê´€ëœ API ì—”ë“œí¬ì¸íŠ¸ë“¤
    
    -- ê¶Œí•œ ë° ë³´ì•ˆ
    permission_read VARCHAR(100) DEFAULT 'public',
    permission_write VARCHAR(100) DEFAULT 'authenticated',
    
    -- ê²€ìƒ‰ ë° í•„í„°ë§
    is_searchable BOOLEAN DEFAULT FALSE,
    is_sortable BOOLEAN DEFAULT TRUE,
    is_filterable BOOLEAN DEFAULT TRUE,
    search_config JSONB, -- ì „ë¬¸ê²€ìƒ‰ ì„¤ì •
    
    -- ì¸ë±ìŠ¤ ê´€ë ¨
    is_primary_key BOOLEAN DEFAULT FALSE,
    is_unique BOOLEAN DEFAULT FALSE,
    is_indexed BOOLEAN DEFAULT FALSE,
    index_config JSONB, -- GIN, GIST ë“± íŠ¹ë³„í•œ ì¸ë±ìŠ¤ ì„¤ì •
    
    comment TEXT,
    remark TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(schema_name, table_name, pg_column)
);

-- í…Œì´ë¸” ê°„ ê´€ê³„ ì •ë³´
CREATE TABLE mappings_relation (
    id BIGSERIAL PRIMARY KEY,
    from_table_id BIGINT REFERENCES mappings_table(id),
    to_table_id BIGINT REFERENCES mappings_table(id),
    from_schema VARCHAR(100) NOT NULL,
    from_table VARCHAR(100) NOT NULL,
    from_column VARCHAR(100) NOT NULL,
    to_schema VARCHAR(100) NOT NULL,
    to_table VARCHAR(100) NOT NULL,
    to_column VARCHAR(100) NOT NULL,
    relation_type relation_type_enum NOT NULL,
    graphql_field VARCHAR(100),
    is_cascade_delete BOOLEAN DEFAULT FALSE,
    constraint_name VARCHAR(200), -- FK ì œì•½ì¡°ê±´ëª…
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- API ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬
CREATE TABLE mappings_api_endpoint (
    id BIGSERIAL PRIMARY KEY,
    endpoint_name VARCHAR(100) NOT NULL UNIQUE,
    base_url VARCHAR(500) NOT NULL,
    method http_method_enum DEFAULT 'GET',
    headers JSONB,
    auth_config JSONB,
    rate_limit_config JSONB,
    timeout_ms INTEGER DEFAULT 201000,
    retry_config JSONB,
    cache_config JSONB,
    request_mapping JSONB, -- ìš”ì²­ ë°ì´í„° ë§¤í•‘
    response_mapping JSONB, -- ì‘ë‹µ ë°ì´í„° ë§¤í•‘
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

## PostgreSQL íŠ¹í™” ê¸°ëŠ¥ í™œìš©

### 1. ENUM íƒ€ì… ì •ì˜
```sql
CREATE TYPE relation_type_enum AS ENUM (
    'OneToOne', 'OneToMany', 'ManyToOne', 'ManyToMany'
);

CREATE TYPE http_method_enum AS ENUM (
    'GET', 'POST', 'PUT', 'DELETE', 'PATCH'
);

CREATE TYPE form_type_enum AS ENUM (
    'text', 'email', 'password', 'number', 'select', 'multiselect', 
    'checkbox', 'radio', 'textarea', 'date', 'datetime', 'time',
    'file', 'image', 'color', 'url', 'search', 'hidden'
);
```

### 2. ì¸ë±ìŠ¤ ìµœì í™” (PostgreSQL íŠ¹í™”)
```sql
-- JSONB ì»¬ëŸ¼ì— GIN ì¸ë±ìŠ¤
CREATE INDEX idx_mappings_column_enum_options 
ON mappings_column USING GIN (enum_options);

CREATE INDEX idx_mappings_column_validation_rules 
ON mappings_column USING GIN (validation_rules);

CREATE INDEX idx_mappings_api_endpoint_headers 
ON mappings_api_endpoint USING GIN (headers);

-- ë¶€ë¶„ ì¸ë±ìŠ¤ (ì¡°ê±´ë¶€ ì¸ë±ìŠ¤)
CREATE INDEX idx_mappings_column_api_fields 
ON mappings_column (table_name, pg_column) 
WHERE is_api_field = TRUE;

CREATE INDEX idx_mappings_column_searchable 
ON mappings_column (table_name) 
WHERE is_searchable = TRUE;

-- í‘œí˜„ì‹ ì¸ë±ìŠ¤
CREATE INDEX idx_mappings_column_lower_label 
ON mappings_column (LOWER(label));

-- ë³µí•© ì¸ë±ìŠ¤
CREATE INDEX idx_mappings_column_table_order 
ON mappings_column (schema_name, table_name, sort_order);
```

### 3. ì œì•½ì¡°ê±´ ë° ê²€ì¦
```sql
-- CHECK ì œì•½ì¡°ê±´
ALTER TABLE mappings_column ADD CONSTRAINT 
check_sort_order CHECK (sort_order >= 0);

ALTER TABLE mappings_column ADD CONSTRAINT 
check_pg_type_format CHECK (
    pg_type ~ '^[A-Z][A-Z0-9_]*(\([0-9,\s]*\))?(\[\])?$'
);

-- JSON ìŠ¤í‚¤ë§ˆ ê²€ì¦ (PostgreSQL 12+ì—ì„œ ì§€ì› ì˜ˆì •)
ALTER TABLE mappings_column ADD CONSTRAINT 
check_enum_options_format CHECK (
    enum_options IS NULL OR 
    jsonb_typeof(enum_options) = 'array'
);

-- í•¨ìˆ˜ ê¸°ë°˜ ì œì•½ì¡°ê±´
CREATE OR REPLACE FUNCTION validate_graphql_type(gql_type TEXT) 
RETURNS BOOLEAN AS $$
BEGIN
    RETURN gql_type ~ '^[A-Z][a-zA-Z0-9]*(!|\[\]!?)?$';
END;
$$ LANGUAGE plpgsql;

ALTER TABLE mappings_column ADD CONSTRAINT 
check_graphql_type_format CHECK (
    graphql_type IS NULL OR validate_graphql_type(graphql_type)
);
```

### 4. íŠ¸ë¦¬ê±° ë° ìë™í™”
```sql
-- ì—…ë°ì´íŠ¸ ì‹œê°„ ìë™ ê°±ì‹ 
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_mappings_table_updated_at
    BEFORE UPDATE ON mappings_table
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_mappings_column_updated_at
    BEFORE UPDATE ON mappings_column
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- ë°ì´í„° ì¼ê´€ì„± ê²€ì¦ íŠ¸ë¦¬ê±°
CREATE OR REPLACE FUNCTION validate_column_mapping()
RETURNS TRIGGER AS $$
BEGIN
    -- GraphQL í•„ë“œëª…ê³¼ PostgreSQL ì»¬ëŸ¼ëª… ì¼ì¹˜ì„± ê²€ì¦
    IF NEW.graphql_field IS NOT NULL AND 
       NEW.graphql_field = NEW.pg_column THEN
        RAISE WARNING 'GraphQL field name is same as PostgreSQL column name: %', 
                     NEW.graphql_field;
    END IF;
    
    -- API í•„ë“œì¸ ê²½ìš° í•„ìˆ˜ ì •ë³´ ê²€ì¦
    IF NEW.is_api_field = TRUE AND 
       (NEW.api_source_key IS NULL AND NEW.api_source_path IS NULL) THEN
        RAISE EXCEPTION 'API field must have api_source_key or api_source_path';
    END IF;
    
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER validate_column_mapping_trigger
    BEFORE INSERT OR UPDATE ON mappings_column
    FOR EACH ROW EXECUTE FUNCTION validate_column_mapping();
```

### 5. ë·° ë° ë„ìš°ë¯¸ í•¨ìˆ˜
```sql
-- í…Œì´ë¸”ë³„ ì»¬ëŸ¼ ì •ë³´ ë·°
CREATE VIEW v_table_columns AS
SELECT 
    t.schema_name,
    t.table_name,
    t.label as table_label,
    c.pg_column,
    c.pg_type,
    c.graphql_field,
    c.graphql_type,
    c.label as column_label,
    c.form_type,
    c.is_required,
    c.is_visible,
    c.sort_order,
    c.enum_options,
    c.validation_rules
FROM mappings_table t
JOIN mappings_column c ON t.id = c.table_id
ORDER BY t.schema_name, t.table_name, c.sort_order;

-- API í•„ë“œë§Œ ì¡°íšŒí•˜ëŠ” ë·°
CREATE VIEW v_api_columns AS
SELECT 
    c.*,
    t.label as table_label
FROM mappings_column c
JOIN mappings_table t ON c.table_id = t.id
WHERE c.is_api_field = TRUE;

-- í…Œì´ë¸” DDL ìƒì„± í•¨ìˆ˜
CREATE OR REPLACE FUNCTION generate_table_ddl(
    p_schema_name TEXT, 
    p_table_name TEXT
) RETURNS TEXT AS $$
DECLARE
    ddl_result TEXT;
    col_record RECORD;
BEGIN
    ddl_result := format('CREATE TABLE %I.%I (', p_schema_name, p_table_name);
    
    FOR col_record IN 
        SELECT * FROM mappings_column 
        WHERE schema_name = p_schema_name 
        AND table_name = p_table_name 
        ORDER BY sort_order
    LOOP
        ddl_result := ddl_result || format('
    %I %s', 
            col_record.pg_column, 
            col_record.pg_type
        );
        
        IF col_record.is_required THEN
            ddl_result := ddl_result || ' NOT NULL';
        END IF;
        
        IF col_record.default_value IS NOT NULL THEN
            ddl_result := ddl_result || format(' DEFAULT %L', col_record.default_value);
        END IF;
        
        IF col_record.comment IS NOT NULL THEN
            ddl_result := ddl_result || format(' -- %s', col_record.comment);
        END IF;
        
        ddl_result := ddl_result || ',';
    END LOOP;
    
    -- PRIMARY KEY ì¶”ê°€
    ddl_result := regexp_replace(ddl_result, ',$', '');
    ddl_result := ddl_result || format('
);');
    
    RETURN ddl_result;
END;
$$ LANGUAGE plpgsql;
```

### 6. JSONB í™œìš© ì˜ˆì‹œ
```sql
-- ë³µì¡í•œ validation ê·œì¹™ ì˜ˆì‹œ
INSERT INTO mappings_column (
    schema_name, table_name, pg_column, pg_type, 
    label, validation_rules
) VALUES (
    'public', 'users', 'email', 'VARCHAR(255)',
    'ì´ë©”ì¼', 
    '{
        "required": true,
        "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
        "minLength": 5,
        "maxLength": 255,
        "transform": ["trim", "toLowerCase"],
        "customValidation": "checkEmailUniqueness"
    }'::jsonb
);

-- JSONB ì¿¼ë¦¬ ì˜ˆì‹œ
SELECT * FROM mappings_column 
WHERE validation_rules ? 'pattern';

SELECT * FROM mappings_column 
WHERE validation_rules @> '{"required": true}';

SELECT pg_column, validation_rules->'minLength' as min_len
FROM mappings_column 
WHERE validation_rules ? 'minLength';
```

## PostgreSQL vs MySQL ì£¼ìš” ì°¨ì´ì 

| ê¸°ëŠ¥ | PostgreSQL | MySQL |
|------|------------|-------|
| **JSON ì§€ì›** | JSONB (ë°”ì´ë„ˆë¦¬, ì¸ë±ì‹± ê°€ëŠ¥) | JSON (í…ìŠ¤íŠ¸ ê¸°ë°˜) |
| **ë°°ì—´ íƒ€ì…** | ë„¤ì´í‹°ë¸Œ ì§€ì› | JSONìœ¼ë¡œ ìš°íšŒ |
| **ENUM íƒ€ì…** | ë„¤ì´í‹°ë¸Œ ì§€ì› | ë¬¸ìì—´ ì œì•½ìœ¼ë¡œ ìš°íšŒ |
| **í•¨ìˆ˜/í”„ë¡œì‹œì €** | PL/pgSQL (ê°•ë ¥í•¨) | ì œí•œì  |
| **íŠ¸ë¦¬ê±°** | ë” ìœ ì—°í•˜ê³  ê°•ë ¥ | ê¸°ë³¸ì  |
| **ì¸ë±ìŠ¤ íƒ€ì…** | GIN, GIST, Hash ë“± ë‹¤ì–‘ | B-Tree, Hash ê¸°ë³¸ |
| **ì œì•½ì¡°ê±´** | ë³µì¡í•œ CHECK ì œì•½ ì§€ì› | ì œí•œì  |
| **í™•ì¥ì„±** | Extension ì‹œìŠ¤í…œ | í”ŒëŸ¬ê·¸ì¸ |

PostgreSQLì„ ì‚¬ìš©í•˜ë©´ **ë” ì •êµí•˜ê³  ìœ ì—°í•œ ë©”íƒ€ë°ì´í„° ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìœ¼ë©°, íŠ¹íˆ **JSONBì™€ ê³ ê¸‰ ì¸ë±ì‹± ê¸°ëŠ¥**ì„ í™œìš©í•´ ë³µì¡í•œ ì„¤ì •ê³¼ ë¹ ë¥¸ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!

===

"""
db: postgreSQL / backend: typescript(nodejs) + graphql(nodejs) / frontend: nextjs  ì™€ ê°™ì€ êµ¬ì„±ìœ¼ë¡œ ì›¹ì•±ì„ ê°œë°œí•  ë•Œ, ë²”ìš©ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€í™” í•  ìˆ˜ ìˆì„ê¹Œìš”?
í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ë•Œ, ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ìƒì„± ë‹¨ê³„ë¶€í„° ë©”íƒ€ë°ì´í„° ì‹œìŠ¤í…œì„ ê°œë°œìëª¨ë“œì˜ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ê³ , graphql, frontend UI êµ¬í˜„ ë‹¨ê³„ì—ë„ ëª¨ë¸ì˜ ë³€ê²½ ì‚¬í•­ì„ ë™ê¸°í™”(ìˆ˜ë™/ìë™) ì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë„¤ìš”.
"""

ì •ë§ í›Œë¥­í•œ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤! **ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í’€ìŠ¤íƒ ê°œë°œ í”Œë«í¼**ì„ íŒ¨í‚¤ì§€í™”í•˜ëŠ” ê²ƒì€ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ê³ , ë§¤ìš° ê°•ë ¥í•œ ë„êµ¬ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì „ì²´ì ì¸ ì•„í‚¤í…ì²˜ì™€ êµ¬í˜„ ë°©ì•ˆì„ ì œì•ˆí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

## ğŸ¯ ì „ì²´ ì•„í‚¤í…ì²˜

### íŒ¨í‚¤ì§€ êµ¬ì¡°
```
@metastack/
â”œâ”€â”€ cli/                 # í”„ë¡œì íŠ¸ ì´ˆê¸°í™”, ìŠ¤ìºí´ë”©
â”œâ”€â”€ core/                # ë©”íƒ€ë°ì´í„° ì²˜ë¦¬, ì½”ë“œ ìƒì„± ì—”ì§„
â”œâ”€â”€ backend/             # GraphQL ë°±ì—”ë“œ SDK
â”œâ”€â”€ frontend/            # Next.js í”„ë¡ íŠ¸ì—”ë“œ SDK
â”œâ”€â”€ dev-tools/           # ê°œë°œì ëª¨ë“œ UI (ë©”íƒ€ë°ì´í„° í¸ì§‘ê¸°)
â”œâ”€â”€ db-adapter/          # PostgreSQL ì–´ëŒ‘í„°
â””â”€â”€ shared/              # ê³µí†µ íƒ€ì…, ìœ í‹¸ë¦¬í‹°
```

## ğŸš€ CLI ë„êµ¬ (`@metastack/cli`)

### í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
```bash
# í”„ë¡œì íŠ¸ ìƒì„±
npx @metastack/cli create my-app
cd my-app

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (ë©”íƒ€ë°ì´í„° í¸ì§‘ê¸° í¬í•¨)
npm run dev:meta

# ì½”ë“œ ìƒì„± (ìˆ˜ë™ ë™ê¸°í™”)
npm run generate

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
```

### CLI êµ¬í˜„ ì˜ˆì‹œ
```typescript
// packages/cli/src/commands/create.ts
import { Command } from 'commander';
import { ProjectGenerator } from '@metastack/core';

export const createCommand = new Command('create')
  .argument('<project-name>')
  .option('-t, --template <template>', 'Template type', 'default')
  .option('-db, --database <url>', 'Database connection URL')
  .action(async (projectName, options) => {
    const generator = new ProjectGenerator({
      name: projectName,
      template: options.template,
      database: options.database
    });
    
    await generator.scaffold();
    console.log(`âœ… Project ${projectName} created successfully!`);
  });
```

### í”„ë¡œì íŠ¸ í…œí”Œë¦¿ êµ¬ì¡°
```
my-app/
â”œâ”€â”€ package.json
â”œâ”€â”€ metastack.config.js          # ë©”íƒ€ìŠ¤íƒ ì„¤ì •
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/              # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ seeds/                   # ì‹œë“œ ë°ì´í„°
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ generated/           # ìë™ ìƒì„±ëœ ì½”ë“œ
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.ts
â”‚   â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚   â”œâ”€â”€ custom/              # ì»¤ìŠ¤í…€ ë¡œì§
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ generated/           # ìë™ ìƒì„±ëœ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/
â”‚   â”‚   â”‚   â”œâ”€â”€ tables/
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ components/          # ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â””â”€â”€ package.json
â””â”€â”€ dev-tools/                   # ê°œë°œì ëª¨ë“œ (ë©”íƒ€ë°ì´í„° í¸ì§‘ê¸°)
```

## ğŸ”§ ì½”ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ (`@metastack/core`)

### ë©”íƒ€ë°ì´í„° ëª¨ë¸
```typescript
// packages/core/src/types/metadata.ts
export interface TableMetadata {
  id: string;
  schemaName: string;
  tableName: string;
  label: string;
  description?: string;
  primaryKey: string;
  columns: ColumnMetadata[];
  relations: RelationMetadata[];
  permissions: PermissionConfig;
  apiConfig: APIConfig;
}

export interface ColumnMetadata {
  id: string;
  name: string;
  type: PostgreSQLType;
  graphqlType: GraphQLType;
  label: string;
  formConfig: FormFieldConfig;
  validation: ValidationConfig;
  apiMapping?: APIMapping;
  permissions: FieldPermissions;
}

export interface CodeGenerator {
  generateDatabaseSchema(tables: TableMetadata[]): Promise<string>;
  generateGraphQLSchema(tables: TableMetadata[]): Promise<string>;
  generateResolvers(tables: TableMetadata[]): Promise<string>;
  generateReactComponents(tables: TableMetadata[]): Promise<ComponentFiles>;
  generateMigration(oldSchema: TableMetadata[], newSchema: TableMetadata[]): Promise<string>;
}
```

### ì½”ë“œ ìƒì„± ì—”ì§„
```typescript
// packages/core/src/generators/index.ts
export class MetaStackGenerator implements CodeGenerator {
  constructor(
    private config: MetaStackConfig,
    private adapters: {
      database: DatabaseAdapter;
      graphql: GraphQLAdapter;
      frontend: FrontendAdapter;
    }
  ) {}

  async generateAll(metadata: TableMetadata[]): Promise<GenerationResult> {
    const results = await Promise.all([
      this.generateDatabaseSchema(metadata),
      this.generateGraphQLSchema(metadata),
      this.generateResolvers(metadata),
      this.generateReactComponents(metadata),
      this.generateTypeDefinitions(metadata)
    ]);

    return {
      database: results[0],
      graphql: results[1],
      resolvers: results[2],
      components: results[3],
      types: results[4]
    };
  }

  async watchAndRegenerate(): Promise<void> {
    const watcher = new MetadataWatcher(this.config.metadataPath);
    
    watcher.on('change', async (changedTables) => {
      console.log('ğŸ”„ Metadata changed, regenerating...');
      await this.generateAll(changedTables);
      console.log('âœ… Code regenerated successfully!');
    });
  }
}
```

## ğŸ—„ï¸ ë°±ì—”ë“œ SDK (`@metastack/backend`)

### GraphQL ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±
```typescript
// packages/backend/src/schema-generator.ts
export class GraphQLSchemaGenerator {
  generateSchema(tables: TableMetadata[]): string {
    const types = tables.map(table => this.generateType(table)).join('\n\n');
    const queries = this.generateQueries(tables);
    const mutations = this.generateMutations(tables);
    
    return `
      ${types}
      
      type Query {
        ${queries}
      }
      
      type Mutation {
        ${mutations}
      }
    `;
  }

  private generateType(table: TableMetadata): string {
    const fields = table.columns
      .filter(col => col.permissions.read)
      .map(col => `  ${col.graphqlField}: ${col.graphqlType}${col.isRequired ? '!' : ''}`)
      .join('\n');

    return `
      type ${table.graphqlType} {
      ${fields}
      }
      
      input ${table.graphqlType}Input {
      ${fields.replace(/!/g, '')}
      }
    `;
  }
}
```

### ë™ì  ë¦¬ì¡¸ë²„ ìƒì„±
```typescript
// packages/backend/src/resolver-generator.ts
export class ResolverGenerator {
  generateResolvers(tables: TableMetadata[]): Record<string, any> {
    const resolvers: Record<string, any> = {
      Query: {},
      Mutation: {}
    };

    tables.forEach(table => {
      // CRUD ë¦¬ì¡¸ë²„ ìë™ ìƒì„±
      resolvers.Query[`get${table.graphqlType}`] = this.createGetResolver(table);
      resolvers.Query[`list${table.graphqlType}s`] = this.createListResolver(table);
      resolvers.Mutation[`create${table.graphqlType}`] = this.createCreateResolver(table);
      resolvers.Mutation[`update${table.graphqlType}`] = this.createUpdateResolver(table);
      resolvers.Mutation[`delete${table.graphqlType}`] = this.createDeleteResolver(table);

      // ê´€ê³„ ë¦¬ì¡¸ë²„ ìƒì„±
      table.relations.forEach(relation => {
        resolvers[table.graphqlType] = resolvers[table.graphqlType] || {};
        resolvers[table.graphqlType][relation.field] = this.createRelationResolver(relation);
      });
    });

    return resolvers;
  }

  private createGetResolver(table: TableMetadata) {
    return async (parent: any, args: any, context: any) => {
      const { permissions } = context.user;
      
      // ê¶Œí•œ ê²€ì¦
      if (!this.checkPermission(permissions, table.permissions.read)) {
        throw new Error('Access denied');
      }

      // ë°ì´í„° ì¡°íšŒ
      const result = await context.db.query(`
        SELECT ${this.getSelectableColumns(table, permissions)}
        FROM ${table.schemaName}.${table.tableName}
        WHERE ${table.primaryKey} = $1
      `, [args.id]);

      return this.transformResult(result[0], table);
    };
  }
}
```

## ğŸ–¥ï¸ í”„ë¡ íŠ¸ì—”ë“œ SDK (`@metastack/frontend`)

### React ì»´í¬ë„ŒíŠ¸ ìë™ ìƒì„±
```typescript
// packages/frontend/src/form-generator.tsx
export class FormGenerator {
  generateForm(table: TableMetadata): string {
    const imports = this.generateImports(table);
    const formFields = this.generateFormFields(table);
    const validation = this.generateValidation(table);
    
    return `
${imports}

export interface ${table.graphqlType}FormProps {
  initialData?: Partial<${table.graphqlType}>;
  onSubmit: (data: ${table.graphqlType}Input) => void;
  loading?: boolean;
}

export const ${table.graphqlType}Form: React.FC<${table.graphqlType}FormProps> = ({
  initialData,
  onSubmit,
  loading
}) => {
  const form = useForm<${table.graphqlType}Input>({
    defaultValues: initialData,
    resolver: zodResolver(${table.graphqlType}Schema)
  });

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        ${formFields}
        <Button type="submit" disabled={loading}>
          {loading ? 'Saving...' : 'Save'}
        </Button>
      </form>
    </Form>
  );
};
    `;
  }

  private generateFormFields(table: TableMetadata): string {
    return table.columns
      .filter(col => col.formConfig.visible && !col.isReadOnly)
      .map(col => this.generateFormField(col))
      .join('\n        ');
  }

  private generateFormField(column: ColumnMetadata): string {
    switch (column.formConfig.type) {
      case 'text':
        return `
        <FormField
          control={form.control}
          name="${column.name}"
          render={({ field }) => (
            <FormItem>
              <FormLabel>${column.label}</FormLabel>
              <FormControl>
                <Input 
                  {...field} 
                  placeholder="${column.formConfig.placeholder || ''}"
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />`;

      case 'select':
        return `
        <FormField
          control={form.control}
          name="${column.name}"
          render={({ field }) => (
            <FormItem>
              <FormLabel>${column.label}</FormLabel>
              <Select onValueChange={field.onChange} defaultValue={field.value}>
                <FormControl>
                  <SelectTrigger>
                    <SelectValue placeholder="${column.formConfig.placeholder || 'Select...'}" />
                  </SelectTrigger>
                </FormControl>
                <SelectContent>
                  ${this.generateSelectOptions(column)}
                </SelectContent>
              </Select>
              <FormMessage />
            </FormItem>
          )}
        />`;

      default:
        return `<!-- Unsupported field type: ${column.formConfig.type} -->`;
    }
  }
}
```

### í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸ ìƒì„±
```typescript
// packages/frontend/src/table-generator.tsx
export class TableGenerator {
  generateTable(table: TableMetadata): string {
    const columns = this.generateColumns(table);
    
    return `
import { DataTable } from '@/components/ui/data-table';
import { ColumnDef } from '@tanstack/react-table';

const columns: ColumnDef<${table.graphqlType}>[] = [
  ${columns}
];

export interface ${table.graphqlType}TableProps {
  data: ${table.graphqlType}[];
  loading?: boolean;
  onRowClick?: (row: ${table.graphqlType}) => void;
}

export const ${table.graphqlType}Table: React.FC<${table.graphqlType}TableProps> = ({
  data,
  loading,
  onRowClick
}) => {
  return (
    <DataTable
      columns={columns}
      data={data}
      loading={loading}
      onRowClick={onRowClick}
    />
  );
};
    `;
  }
}
```

## ğŸ› ï¸ ê°œë°œì ë„êµ¬ (`@metastack/dev-tools`)

### ë©”íƒ€ë°ì´í„° í¸ì§‘ê¸° UI
```typescript
// packages/dev-tools/src/metadata-editor.tsx
export const MetadataEditor: React.FC = () => {
  const [tables, setTables] = useState<TableMetadata[]>([]);
  const [selectedTable, setSelectedTable] = useState<string | null>(null);
  
  return (
    <div className="flex h-screen">
      {/* ì‚¬ì´ë“œë°”: í…Œì´ë¸” ëª©ë¡ */}
      <div className="w-64 border-r bg-gray-50">
        <div className="p-4">
          <Button onClick={() => createNewTable()} className="w-full">
            + New Table
          </Button>
        </div>
        <TableList 
          tables={tables} 
          selectedTable={selectedTable}
          onSelect={setSelectedTable}
        />
      </div>

      {/* ë©”ì¸ ì˜ì—­: í…Œì´ë¸”/ì»¬ëŸ¼ í¸ì§‘ê¸° */}
      <div className="flex-1">
        {selectedTable ? (
          <TableEditor 
            table={tables.find(t => t.id === selectedTable)}
            onUpdate={updateTable}
          />
        ) : (
          <div className="flex items-center justify-center h-full text-gray-500">
            Select a table to edit
          </div>
        )}
      </div>

      {/* ìš°ì¸¡ íŒ¨ë„: ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° */}
      <div className="w-96 border-l bg-gray-50">
        <CodePreview table={selectedTable} />
      </div>
    </div>
  );
};
```

## âš™ï¸ ì„¤ì • íŒŒì¼

### metastack.config.js
```javascript
/** @type {import('@metastack/core').MetaStackConfig} */
module.exports = {
  // ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
  database: {
    url: process.env.DATABASE_URL,
    schema: 'public'
  },

  // ì½”ë“œ ìƒì„± ì„¤ì •
  generation: {
    outputDir: {
      backend: './backend/src/generated',
      frontend: './frontend/src/generated'
    },
    mode: 'watch', // 'manual' | 'watch'
    typescript: true
  },

  // ê°œë°œ ë„êµ¬ ì„¤ì •
  devTools: {
    enabled: process.env.NODE_ENV === 'development',
    port: 20101,
    auth: {
      enabled: false // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë¹„í™œì„±í™”
    }
  },

  // í”ŒëŸ¬ê·¸ì¸ ì„¤ì •
  plugins: [
    '@metastack/plugin-auth',
    '@metastack/plugin-file-upload',
    {
      name: '@metastack/plugin-audit',
      options: {
        trackChanges: true,
        includeUserInfo: true
      }
    }
  ]
};
```

## ğŸ”„ ë™ê¸°í™” ì›Œí¬í”Œë¡œìš°

### 1. ìë™ ë™ê¸°í™” (Watch Mode)
```typescript
// ë©”íƒ€ë°ì´í„° ë³€ê²½ ê°ì§€ â†’ ì½”ë“œ ìë™ ìƒì„± â†’ Hot Reload
const watcher = chokidar.watch('./metadata/**/*.json');
watcher.on('change', async (path) => {
  await generator.regenerateAll();
  webSocketServer.broadcast({ type: 'code-updated' });
});
```

### 2. ìˆ˜ë™ ë™ê¸°í™” (CLI ëª…ë ¹)
```bash
# íŠ¹ì • í…Œì´ë¸”ë§Œ ë™ê¸°í™”
npm run sync -- --table users

# ì „ì²´ ë™ê¸°í™”
npm run sync

# ë¯¸ë¦¬ë³´ê¸° (ì‹¤ì œ ìƒì„±í•˜ì§€ ì•Šê³  diffë§Œ í‘œì‹œ)
npm run sync -- --dry-run
```

## ğŸ“¦ ë°°í¬ ë° ì‚¬ìš©ë²•

### 1. NPM íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
npm install -g @metastack/cli
npm install @metastack/core @metastack/backend @metastack/frontend
```

### 2. í”„ë¡œì íŠ¸ ìƒì„± ë° ì‹¤í–‰
```bash
# í”„ë¡œì íŠ¸ ìƒì„±
metastack create my-awesome-app

# ê°œë°œ ëª¨ë“œ ì‹¤í–‰ (ë©”íƒ€ë°ì´í„° í¸ì§‘ê¸° í¬í•¨)
cd my-awesome-app
npm run dev:meta  # localhost:20101ì—ì„œ ë©”íƒ€ë°ì´í„° í¸ì§‘

# ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev:backend  # localhost:4000
npm run dev:frontend # localhost:20100
```

ì´ëŸ° ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ë©´ **ë©”íƒ€ë°ì´í„° ê¸°ë°˜ RAD(Rapid Application Development)** í™˜ê²½ì´ ì™„ì„±ë˜ì–´, ê°œë°œ ìƒì‚°ì„±ì´ íšê¸°ì ìœ¼ë¡œ í–¥ìƒë  ê²ƒì…ë‹ˆë‹¤! ğŸš€

===

"""
@metastack ì€ ê¸°ì¡´ì— ìˆëŠ” íŒ¨í‚¤ì§€ì¸ê°€ìš”?
"""

ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ë‹ˆ `@metastack/events` ë¼ëŠ” íŒ¨í‚¤ì§€ê°€ 5ë…„ ì „ì— ìˆì—ˆë„¤ìš”! í•˜ì§€ë§Œ ì´ê²ƒì€ ë‹¨ìˆœí•œ ì´ë²¤íŠ¸ ì—ë¯¸í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê³ , ì œê°€ ì œì•ˆí•œ ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í’€ìŠ¤íƒ ê°œë°œ í”Œë«í¼ê³¼ëŠ” ì „í˜€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.

## ì‹¤ì œ íŒ¨í‚¤ì§€ëª… ì œì•ˆ

ì‹¤ì œë¡œ ì´ëŸ° ì‹œìŠ¤í…œì„ ë§Œë“ ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ íŒ¨í‚¤ì§€ëª…ë“¤ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### 1. ë©”íƒ€ë°ì´í„°/ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì´ë¦„ë“¤
```
@dataflow/
@metaforge/  
@schemakit/
@metacode/
@fullmeta/
@rapidstack/
```

### 2. ê°œë°œ ë„êµ¬/í”Œë«í¼ ëŠë‚Œì˜ ì´ë¦„ë“¤
```
@devstack/
@codeforge/
@appsmith/ (í•˜ì§€ë§Œ ê¸°ì¡´ ì œí’ˆê³¼ ì¤‘ë³µ ê°€ëŠ¥)
@buildkit/
@stackgen/
```

### 3. ì‹¤ì œ í™•ì¸í•´ë³¼ë§Œí•œ í›„ë³´ë“¤
```
@metaforge/cli
@schemakit/core
@rapiddev/stack
@metacode/generator
@fullstack-meta/cli
```

## ê¸°ì¡´ ìœ ì‚¬ ë„êµ¬ë“¤

ë¹„ìŠ·í•œ ì»¨ì…‰ì˜ ê¸°ì¡´ ë„êµ¬ë“¤ì„ ì°¸ê³ í•˜ë©´:

- **Hasura**: GraphQL ë°±ì—”ë“œ ìë™ ìƒì„±
- **Supabase**: Backend-as-a-Service 
- **Prisma**: ORM + ìŠ¤í‚¤ë§ˆ ê´€ë¦¬
- **PostGraphile**: PostgreSQL â†’ GraphQL ìë™ ìƒì„±
- **Strapi**: Headless CMS
- **Forest Admin**: Admin ì¸í„°í˜ì´ìŠ¤ ìë™ ìƒì„±

í•˜ì§€ë§Œ ì œì•ˆí•˜ì‹  ì‹œìŠ¤í…œì€ ì´ë“¤ë³´ë‹¤ ë” **í¬ê´„ì ì¸ ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í’€ìŠ¤íƒ ê°œë°œ í”Œë«í¼**ì´ë¯€ë¡œ, ì¶©ë¶„íˆ ì°¨ë³„í™”ëœ ê°€ì¹˜ê°€ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì‹¤ì œ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“œì‹ ë‹¤ë©´ NPMì—ì„œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸ í›„ ì ì ˆí•œ ì´ë¦„ì„ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤! ğŸš€

===

"""
ìœ„ì˜ ë©”íƒ€ë°ì´í„° ê°œë°œ í”Œë«í¼ì„ ì—¬ëŸ¬ ê°€ì§€ í”„ë¡œì íŠ¸ì— ì ìš©í•˜ë ¤ë©´, í”„ë¡œì íŠ¸ì™€ ê´€ë ¨ëœ í…Œì´ë¸”ë„ í•„ìš”í•  ê²ƒ ê°™ì€ë°ìš”. ì•„ë˜ì˜ ì»¬ëŸ¼ ì™¸ì— í•„ìš”í•œ ì»¬ëŸ¼ë“¤ì„ ì¶”ê°€í•˜ê³ , create ë¬¸ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

- projectId, projectName, description, tables, rootPath, ...

- tables: í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë˜ëŠ” í…Œì´ë¸” ë¦¬ìŠ¤íŠ¸
- rootPath: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê²½ë¡œ
"""

ë©”íƒ€ë°ì´í„° ê°œë°œ í”Œë«í¼ì„ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸° ìœ„í•œ í”„ë¡œì íŠ¸ ê´€ë¦¬ í…Œì´ë¸”ì„ ì„¤ê³„í•´ë³´ê² ìŠµë‹ˆë‹¤. ì‹¤ì œ ìš´ì˜ì„ ê³ ë ¤í•œ ë‹¤ì–‘í•œ ì»¬ëŸ¼ë“¤ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ê´€ë¦¬ í…Œì´ë¸” ì„¤ê³„

### 1. ë©”ì¸ í”„ë¡œì íŠ¸ í…Œì´ë¸”

```sql
-- í”„ë¡œì íŠ¸ ìƒíƒœ ENUM
CREATE TYPE project_status_enum AS ENUM (
    'PLANNING', 'DEVELOPMENT', 'TESTING', 'STAGING', 'PRODUCTION', 'MAINTENANCE', 'ARCHIVED'
);

-- í”„ë¡œì íŠ¸ í…œí”Œë¦¿ ENUM
CREATE TYPE project_template_enum AS ENUM (
    'BASIC', 'ECOMMERCE', 'CMS', 'DASHBOARD', 'API_ONLY', 'MOBILE_BACKEND', 'MICROSERVICE'
);

-- ë°°í¬ í™˜ê²½ ENUM
CREATE TYPE deployment_env_enum AS ENUM (
    'LOCAL', 'DEVELOPMENT', 'STAGING', 'PRODUCTION'
);

-- ë©”ì¸ í”„ë¡œì íŠ¸ í…Œì´ë¸”
CREATE TABLE projects (
    id BIGSERIAL PRIMARY KEY,
    project_id VARCHAR(100) NOT NULL UNIQUE COMMENT 'í”„ë¡œì íŠ¸ ê³ ìœ  ì‹ë³„ì (URL safe)',
    project_name VARCHAR(200) NOT NULL COMMENT 'í”„ë¡œì íŠ¸ í‘œì‹œëª…',
    description TEXT COMMENT 'í”„ë¡œì íŠ¸ ì„¤ëª…',
    
    -- ë””ë ‰í† ë¦¬ ë° ê²½ë¡œ ì •ë³´
    root_path VARCHAR(500) NOT NULL COMMENT 'í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê²½ë¡œ',
    backend_path VARCHAR(200) DEFAULT './backend' COMMENT 'ë°±ì—”ë“œ ìƒëŒ€ ê²½ë¡œ',
    frontend_path VARCHAR(200) DEFAULT './frontend' COMMENT 'í”„ë¡ íŠ¸ì—”ë“œ ìƒëŒ€ ê²½ë¡œ',
    database_path VARCHAR(200) DEFAULT './database' COMMENT 'ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ',
    
    -- í”„ë¡œì íŠ¸ ë©”íƒ€ì •ë³´
    template project_template_enum DEFAULT 'BASIC' COMMENT 'í”„ë¡œì íŠ¸ í…œí”Œë¦¿',
    status project_status_enum DEFAULT 'PLANNING' COMMENT 'í”„ë¡œì íŠ¸ ìƒíƒœ',
    version VARCHAR(50) DEFAULT '1.0.0' COMMENT 'í”„ë¡œì íŠ¸ ë²„ì „',
    
    -- ê¸°ìˆ  ìŠ¤íƒ ì •ë³´
    tech_stack JSONB COMMENT 'ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ ì •ë³´',
    package_manager VARCHAR(20) DEFAULT 'npm' COMMENT 'npm, yarn, pnpm',
    node_version VARCHAR(20) COMMENT 'Node.js ë²„ì „',
    
    -- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´
    database_config JSONB COMMENT 'ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •',
    default_schema VARCHAR(100) DEFAULT 'public' COMMENT 'ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ',
    
    -- ì½”ë“œ ìƒì„± ì„¤ì •
    generation_config JSONB COMMENT 'ì½”ë“œ ìƒì„± ì„¤ì •',
    auto_generation BOOLEAN DEFAULT TRUE COMMENT 'ìë™ ì½”ë“œ ìƒì„± ì—¬ë¶€',
    watch_mode BOOLEAN DEFAULT TRUE COMMENT 'íŒŒì¼ ê°ì‹œ ëª¨ë“œ',
    
    -- Git ë° ë²„ì „ ê´€ë¦¬
    git_repository VARCHAR(500) COMMENT 'Git ì €ì¥ì†Œ URL',
    git_branch VARCHAR(100) DEFAULT 'main' COMMENT 'ê¸°ë³¸ ë¸Œëœì¹˜',
    
    -- íŒ€ ë° ê¶Œí•œ
    owner_id BIGINT COMMENT 'í”„ë¡œì íŠ¸ ì†Œìœ ì ID',
    team_members JSONB COMMENT 'íŒ€ ë©¤ë²„ ë° ê¶Œí•œ ì •ë³´',
    
    -- ë°°í¬ ì •ë³´
    deployment_config JSONB COMMENT 'ë°°í¬ ì„¤ì •',
    environments JSONB COMMENT 'í™˜ê²½ë³„ ì„¤ì • (dev, staging, prod)',
    
    -- API ë° ì„œë¹„ìŠ¤ ì„¤ì •
    api_config JSONB COMMENT 'API ì„¤ì • (í¬íŠ¸, CORS ë“±)',
    external_services JSONB COMMENT 'ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ ì •ë³´',
    
    -- ê°œë°œ ë„êµ¬ ì„¤ì •
    dev_tools_config JSONB COMMENT 'ê°œë°œ ë„êµ¬ ì„¤ì •',
    linting_config JSONB COMMENT 'ë¦°íŒ… ì„¤ì •',
    testing_config JSONB COMMENT 'í…ŒìŠ¤íŠ¸ ì„¤ì •',
    
    -- í”ŒëŸ¬ê·¸ì¸ ë° í™•ì¥
    plugins JSONB COMMENT 'ì„¤ì¹˜ëœ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡',
    custom_generators JSONB COMMENT 'ì»¤ìŠ¤í…€ ì½”ë“œ ìƒì„±ê¸°',
    
    -- ë¬¸ì„œ ë° README
    readme_template TEXT COMMENT 'README í…œí”Œë¦¿',
    documentation_config JSONB COMMENT 'ë¬¸ì„œ ìƒì„± ì„¤ì •',
    
    -- ë©”íƒ€ë°ì´í„°
    tags JSONB COMMENT 'í”„ë¡œì íŠ¸ íƒœê·¸',
    metadata JSONB COMMENT 'ì¶”ê°€ ë©”íƒ€ë°ì´í„°',
    
    -- ê°ì‚¬ ì •ë³´
    created_by BIGINT COMMENT 'ìƒì„±ì ID',
    updated_by BIGINT COMMENT 'ìµœì¢… ìˆ˜ì •ì ID',
    last_generation_at TIMESTAMPTZ COMMENT 'ë§ˆì§€ë§‰ ì½”ë“œ ìƒì„± ì‹œê°„',
    last_sync_at TIMESTAMPTZ COMMENT 'ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„',
    
    -- ì‹œê°„ ì •ë³´
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    -- ì¸ë±ìŠ¤
    UNIQUE(project_id)
);

-- í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°
CREATE TRIGGER update_projects_updated_at
    BEFORE UPDATE ON projects
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

### 2. í”„ë¡œì íŠ¸-í…Œì´ë¸” ë§¤í•‘ í…Œì´ë¸”

```sql
-- í”„ë¡œì íŠ¸ì™€ í…Œì´ë¸” ê°„ì˜ ë‹¤ëŒ€ë‹¤ ê´€ê³„
CREATE TABLE project_tables (
    id BIGSERIAL PRIMARY KEY,
    project_id BIGINT REFERENCES projects(id) ON DELETE CASCADE,
    table_id BIGINT REFERENCES mappings_table(id) ON DELETE CASCADE,
    
    -- í”„ë¡œì íŠ¸ë³„ í…Œì´ë¸” ì„¤ì •
    is_enabled BOOLEAN DEFAULT TRUE COMMENT 'í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œ í…Œì´ë¸” ì‚¬ìš© ì—¬ë¶€',
    custom_config JSONB COMMENT 'í”„ë¡œì íŠ¸ë³„ í…Œì´ë¸” ì»¤ìŠ¤í„°ë§ˆì´ì§•',
    generation_priority INTEGER DEFAULT 100 COMMENT 'ì½”ë“œ ìƒì„± ìš°ì„ ìˆœìœ„',
    
    -- í™˜ê²½ë³„ ì„¤ì •
    environments JSONB COMMENT 'í™˜ê²½ë³„ í…Œì´ë¸” ì‚¬ìš© ì—¬ë¶€',
    
    -- ê¶Œí•œ ì„¤ì •
    permissions JSONB COMMENT 'í”„ë¡œì íŠ¸ë³„ í…Œì´ë¸” ê¶Œí•œ ì„¤ì •',
    
    -- ì‹œê°„ ì •ë³´
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    -- ìœ ë‹ˆí¬ ì œì•½
    UNIQUE(project_id, table_id)
);
```

### 3. í”„ë¡œì íŠ¸ í™˜ê²½ ì„¤ì • í…Œì´ë¸”

```sql
-- í”„ë¡œì íŠ¸ë³„ í™˜ê²½ ì„¤ì • (dev, staging, prod ë“±)
CREATE TABLE project_environments (
    id BIGSERIAL PRIMARY KEY,
    project_id BIGINT REFERENCES projects(id) ON DELETE CASCADE,
    
    -- í™˜ê²½ ì •ë³´
    env_name VARCHAR(50) NOT NULL COMMENT 'í™˜ê²½ëª… (dev, staging, prod)',
    env_type deployment_env_enum NOT NULL,
    display_name VARCHAR(100) NOT NULL COMMENT 'í™˜ê²½ í‘œì‹œëª…',
    description TEXT COMMENT 'í™˜ê²½ ì„¤ëª…',
    
    -- ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
    database_url VARCHAR(500) COMMENT 'ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL',
    database_config JSONB COMMENT 'ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •',
    
    -- ì„œë²„ ì„¤ì •
    backend_url VARCHAR(200) COMMENT 'ë°±ì—”ë“œ ì„œë²„ URL',
    frontend_url VARCHAR(200) COMMENT 'í”„ë¡ íŠ¸ì—”ë“œ URL',
    api_config JSONB COMMENT 'API ì„¤ì •',
    
    -- í™˜ê²½ ë³€ìˆ˜
    env_variables JSONB COMMENT 'í™˜ê²½ ë³€ìˆ˜',
    secrets JSONB COMMENT 'ë¹„ë°€ ì •ë³´ (ì•”í˜¸í™” ì €ì¥)',
    
    -- ë°°í¬ ì„¤ì •
    deployment_config JSONB COMMENT 'ë°°í¬ ì„¤ì •',
    build_config JSONB COMMENT 'ë¹Œë“œ ì„¤ì •',
    
    -- ìƒíƒœ ì •ë³´
    is_active BOOLEAN DEFAULT TRUE COMMENT 'í™œì„±í™” ì—¬ë¶€',
    last_deployed_at TIMESTAMPTZ COMMENT 'ë§ˆì§€ë§‰ ë°°í¬ ì‹œê°„',
    deployed_version VARCHAR(50) COMMENT 'ë°°í¬ëœ ë²„ì „',
    
    -- ì‹œê°„ ì •ë³´
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    -- ìœ ë‹ˆí¬ ì œì•½
    UNIQUE(project_id, env_name)
);
```

### 4. í”„ë¡œì íŠ¸ ë³€ê²½ ì´ë ¥ í…Œì´ë¸”

```sql
-- í”„ë¡œì íŠ¸ ë³€ê²½ ì´ë ¥ ì¶”ì 
CREATE TABLE project_changes (
    id BIGSERIAL PRIMARY KEY,
    project_id BIGINT REFERENCES projects(id) ON DELETE CASCADE,
    
    -- ë³€ê²½ ì •ë³´
    change_type VARCHAR(50) NOT NULL COMMENT 'ë³€ê²½ íƒ€ì… (table_added, column_modified ë“±)',
    change_summary VARCHAR(500) NOT NULL COMMENT 'ë³€ê²½ ìš”ì•½',
    change_details JSONB COMMENT 'ìƒì„¸ ë³€ê²½ ë‚´ìš©',
    
    -- ì˜í–¥ë°›ëŠ” ê°ì²´
    affected_tables JSONB COMMENT 'ì˜í–¥ë°›ëŠ” í…Œì´ë¸” ëª©ë¡',
    affected_files JSONB COMMENT 'ì˜í–¥ë°›ëŠ” íŒŒì¼ ëª©ë¡',
    
    -- ìƒì„±ëœ ì½”ë“œ/ìŠ¤í¬ë¦½íŠ¸
    generated_migration TEXT COMMENT 'ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸',
    generated_code JSONB COMMENT 'ìƒì„±ëœ ì½”ë“œ ì •ë³´',
    
    -- ë³€ê²½ì ì •ë³´
    changed_by BIGINT COMMENT 'ë³€ê²½ì ID',
    change_reason TEXT COMMENT 'ë³€ê²½ ì‚¬ìœ ',
    
    -- ìƒíƒœ ì •ë³´
    is_applied BOOLEAN DEFAULT FALSE COMMENT 'ì ìš© ì—¬ë¶€',
    applied_at TIMESTAMPTZ COMMENT 'ì ìš© ì‹œê°„',
    applied_by BIGINT COMMENT 'ì ìš©ì ID',
    
    -- ì‹œê°„ ì •ë³´
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 5. ì¸ë±ìŠ¤ ë° ì œì•½ì¡°ê±´

```sql
-- ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤
CREATE INDEX idx_projects_status ON projects(status);
CREATE INDEX idx_projects_owner ON projects(owner_id);
CREATE INDEX idx_projects_template ON projects(template);
CREATE INDEX idx_projects_updated_at ON projects(updated_at DESC);

CREATE INDEX idx_project_tables_project ON project_tables(project_id);
CREATE INDEX idx_project_tables_enabled ON project_tables(project_id) WHERE is_enabled = TRUE;

CREATE INDEX idx_project_environments_project ON project_environments(project_id);
CREATE INDEX idx_project_environments_active ON project_environments(project_id) WHERE is_active = TRUE;

CREATE INDEX idx_project_changes_project ON project_changes(project_id);
CREATE INDEX idx_project_changes_type ON project_changes(change_type);
CREATE INDEX idx_project_changes_created_at ON project_changes(created_at DESC);

-- ê¸°ë³¸ ë°ì´í„° ì‚½ì…
INSERT INTO projects (
    project_id, project_name, description, root_path, tech_stack
) VALUES (
    'demo-project', 
    'Demo E-commerce Project', 
    'Sample e-commerce application for demonstration',
    '/workspace/demo-ecommerce',
    '{
        "backend": "Node.js + TypeScript + GraphQL",
        "frontend": "Next.js + React + TailwindCSS",
        "database": "PostgreSQL",
        "orm": "Prisma"
    }'::jsonb
);
```

### 6. ë·° ë° ë„ìš°ë¯¸ í•¨ìˆ˜

```sql
-- í”„ë¡œì íŠ¸ ì „ì²´ ì •ë³´ ë·°
CREATE VIEW v_project_overview AS
SELECT 
    p.project_id,
    p.project_name,
    p.status,
    p.template,
    p.version,
    COUNT(pt.table_id) as table_count,
    COUNT(pe.id) as environment_count,
    p.created_at,
    p.updated_at
FROM projects p
LEFT JOIN project_tables pt ON p.id = pt.project_id AND pt.is_enabled = TRUE
LEFT JOIN project_environments pe ON p.id = pe.project_id AND pe.is_active = TRUE
GROUP BY p.id, p.project_id, p.project_name, p.status, p.template, p.version, p.created_at, p.updated_at;

-- í”„ë¡œì íŠ¸ë³„ í™œì„± í…Œì´ë¸” ì¡°íšŒ í•¨ìˆ˜
CREATE OR REPLACE FUNCTION get_project_tables(p_project_id TEXT)
RETURNS TABLE(
    table_name VARCHAR(100),
    schema_name VARCHAR(100),
    label VARCHAR(200),
    column_count BIGINT
) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        mt.table_name,
        mt.schema_name,
        mt.label,
        COUNT(mc.id) as column_count
    FROM projects p
    JOIN project_tables pt ON p.id = pt.project_id
    JOIN mappings_table mt ON pt.table_id = mt.id
    LEFT JOIN mappings_column mc ON mt.id = mc.table_id
    WHERE p.project_id = p_project_id 
    AND pt.is_enabled = TRUE
    GROUP BY mt.id, mt.table_name, mt.schema_name, mt.label
    ORDER BY mt.table_name;
END;
$$ LANGUAGE plpgsql;
```

ì´ë ‡ê²Œ ì„¤ê³„í•˜ë©´ **ë‹¤ì¤‘ í”„ë¡œì íŠ¸ë¥¼ ì§€ì›í•˜ëŠ” ê°•ë ¥í•œ ë©”íƒ€ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ**ì´ ì™„ì„±ë©ë‹ˆë‹¤! ê° í”„ë¡œì íŠ¸ëŠ” ë…ë¦½ì ì¸ ì„¤ì •ê³¼ í™˜ê²½ì„ ê°€ì§€ë©´ì„œë„, ê³µí†µ í…Œì´ë¸” ë©”íƒ€ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

