- http://1.231.118.217:20100/ 페이지에서 아래와 같은 설정 정보도 CRUD를 할 수 있도록 해주세요.
  - cu.sh 에서 공유 데이터베이스의 설정이 적용되고
  - cp.sh 에서는 backend, graphql, frontend 등의 서버 포트(예비용 포함) 설정이 적용되야 합니다.
  - 그런데, 우선 스크립트에 적용하기 전에 아래와 같은 사항들이 Platform Manager 에서 CRUD가 가능하도록 해주세요.

  - 공유 데이터베이스, 서버
    - docker-compose.yml, ..., .env 등에 적용
    - platform 생성시 자동(default 템플릿) & 수동 설정
    - platform별로 공유하는 mysql, postgresql의 접속 정보
    - platform별(or 모든 platform)로 공유하는 사용자/권한/인증 서버, NAS 파일/폴더 CRUD(검색/목록/보기/변경/삭제) 서버, 개발.운용 문서 CRUD 서버, ...
  - port 관리
    - project 생성시 자동(default 템플릿 + 생성 넘버링 규칙 + 중복 port 감지) & 수동 설정, 
    - project 별로 설정된 server port 목록, 생성 넘버링 규칙, 수동 변경
  - 공유 데이터베이스(default: postgresql, 플랫폼 생성시 데이터베이스 선택하도록 함) 내 프로젝트별 db 자동 생성(더 좋은 규칙이 있으면 추천, 데이터베이스 이름에 '-'를 사용할 수 없다면 규칙 변경)
    - syntax: <platform-name>_<project-name>_db
    - 예) 플랫폼명: ubuntu-test-1, 프로젝트명: test-project-1 => ubuntu-test-1_test-project-1

---
설정 관련 사항은 /var/services/homes/jungsam/dockers/_settings 의
dockers, projects 폴더의 내용을 참고해주세요.


---

완료된 작업 요약:

  1. ✅ Backend (API) 업데이트

  - TypeScript 인터페이스 확장
  (src/types/index.ts)
    - Platform: 데이터베이스
  비밀번호, 보안 키, 볼륨,
  portIncrement 추가
    - Project: 포트(reserved
  포함), 데이터베이스 상세 설정,
  보안, Docker, 볼륨 추가
  - 헬퍼 함수 생성
  (src/utils/helpers.ts)
    - generateDatabaseName():
  ubuntu_test_1__my_project_db
  형식
    - generateDatabaseUser():
  ubuntu_test_1__my_project_user
  형식
    - calculateProjectPorts():
  basePort + (index * increment)
  기반 포트 자동 할당
    - checkPortConflicts(): 포트
  충돌 검사
    - 비밀번호/키 생성,
  Docker/볼륨 경로 생성 등
  - PlatformService 업데이트
    - 자동 생성: MySQL/PostgreSQL
   비밀번호, JWT Salt, Encryption
   Key
    - 볼륨 경로 자동 설정
  - ProjectService 업데이트
    - Platform 설정 기반 자동
  구성
    - 포트 자동 할당 (중복 방지)
    - 데이터베이스 이름 규칙
  적용: platform__project_db
    - Docker 설정, 보안 키, 볼륨
  자동 생성

  2. ✅ Frontend (Web) 업데이트

  - TypeScript 인터페이스 확장
  (src/lib/api.ts)
    - Backend와 동일한 스키마로
  업데이트
  - GitUsers API 클라이언트 추가
    - getGitUsers() 메서드
  - Modal 업데이트
    - PlatformModal: GitHub User
  드롭다운
    - ProjectModal: GitHub User
  드롭다운 (Platform 기본값)

  다음 단계 (아직 미완성):

  현재 기본 스키마와 자동 생성
  로직은 완료되었지만, UI에서 
  이러한 설정들을 보고 편집하는 
  기능은 아직 구현되지
  않았습니다.

===

  완료된 작업 전체 요약:

  1. ✅ 데이터베이스 이름 규칙 구현

  - 규칙: platform__project_db (언더스코어 2개로 구분)
  - 예시: ubuntu_test_1__my_project_db
  - 하이픈(-)을 언더스코어(_)로 자동 변환

  2. ✅ Backend (API) 완전 업데이트

  - TypeScript 인터페이스 확장
    - Platform: portIncrement, 데이터베이스 비밀번호, 보안 키, 볼륨 경로
    - Project: reserved 포트, 데이터베이스 전체 설정, 보안, Docker, 볼륨
  - 헬퍼 함수 (src/utils/helpers.ts)
    - generateDatabaseName(): DB 이름 자동 생성
    - generateDatabaseUser(): DB 사용자 자동 생성
    - calculateProjectPorts(): 포트 자동 할당
    - checkPortConflicts(): 포트 충돌 검사
    - getNextProjectIndex(): 다음 프로젝트 인덱스 계산
    - 비밀번호/키 생성, Docker 이미지명, 볼륨 경로 생성
  - PlatformService
    - Platform 생성 시 자동 생성:
        - MySQL/PostgreSQL 비밀번호 (32자)
      - JWT Secret Salt (64자)
      - Encryption Key (64자)
      - 볼륨 경로 자동 설정
  - ProjectService
    - Project 생성 시 자동 처리:
        - Platform 설정 기반 포트 자동 할당 (basePort + index * increment)
      - 데이터베이스 이름: platform__project_db 형식
      - 데이터베이스 사용자 및 비밀번호 자동 생성
      - JWT Secret (64자)
      - Docker 이미지명 자동 생성
      - 볼륨 경로 자동 설정

  3. ✅ Frontend (Web) 완전 업데이트

  - TypeScript 인터페이스 - Backend와 동기화
  - GitUsers API
    - getGitUsers(): gitusers.json에서 사용자 목록 가져오기
    - PlatformModal/ProjectModal에서 드롭다운으로 선택
  - PlatformModal 개선
    - GitHub User 드롭다운
    - Edit 모드에서 "Advanced Settings" 토글 버튼
        - Base Port / Port Increment
      - Network (Subnet, Gateway)
      - Database (Default Type, MySQL/PostgreSQL Host)
      - Volumes (Data, Logs, Backups 경로)
  - ProjectModal 개선
    - GitHub User 드롭다운 (Platform 기본값)
    - Platform 변경 시 GitHub User 자동 업데이트
    - Edit 모드에서 "Advanced Settings" 토글 버튼
        - Ports (Backend, GraphQL, Frontend Next.js, Frontend SvelteKit,
  Reserved)
      - Database (Type, Host, Name, User, Auto Create)
      - Environment (Node Env, CORS Origin)
      - Docker Images (Backend, Frontend 이미지명)
      - Volumes (Data, Logs, Uploads 경로)

  4. ✅ 자동화된 설정 관리

  - Platform 생성 시: 모든 필수 설정이 자동으로 안전하게 생성됨
  - Project 생성 시:
    - 포트 자동 할당 (중복 없음)
    - 데이터베이스 이름 규칙 자동 적용
    - Platform 설정 상속
    - 모든 경로 및 이미지명 자동 생성

  5. ✅ UI/UX 개선

  - 모든 설정을 볼 수 있는 "Advanced Settings" 섹션
  - 현재는 읽기 전용 (disabled)으로 표시
  - 향후 필요시 편집 가능하도록 확장 가능

===

 /var/services/homes/jungsam/dockers/jnj-ubuntu/.env 파일을 참고하여,
 /var/services/homes/jungsam/dockers/_manager/data/databases.json 파일에 아래와 같은 내용으로 저장하고, 이 파일을 기준으로
 - platform 생성시에, database 유형을 선택(mysql, postgresql)하면
  해당 유형의 데이터베이스의 설정은 선택할 수 있도록 해주세요. 현재는 mysql, postgresql 이 1개씩밖에 없으니 별 의미가 없으나 2개 이상이 되었을 때는 특정 데이터베이스 접속을 선택하는 경우, 상세 설정값이 입력 영역의 아래 부분에 slide 방식으로 뜨도록 해주세요.


```json
{
  "mysqls" : {
    "mysql_1" : {
      "MYSQL_HOST": "1.231.118.217",
      "MYSQL_PORT": 2306,
      ...
    }
  },
  "postgresql": {
    "postgresql_1": {
      "POSTGRES_HOST": "1.231.118.217",
      "POSTGRES_PORT": 5433,
      ...
    }
  }
}

```

MYSQL_HOST=1.231.118.217
MYSQL_PORT=2306
MYSQL_USER=root
MYSQL_PASSWORD=mysqlIlmac1!

## Mysql Home NAS(Docker)
# MYSQL_HOST=14.34.23.70
# MYSQL_PORT=3311
# MYSQL_USER=root
# MYSQL_PASSWORD=mysqlIlmac1!

# PostgreSQL Ilmac NAS(Docker)
POSTGRES_HOST=1.231.118.217
POSTGRES_USER=admin
POSTGRES_PASSWORD="IlmacPost9)"
POSTGRES_DB=jnj_dev_db
POSTGRES_PORT=5433

---

  1. ✅ databases.json 파일 생성

  /var/services/homes/jungsam/dockers/_manager/data/databases.json
  - MySQL 데이터베이스 2개: mysql_ilmac, mysql_home
  - PostgreSQL 데이터베이스 1개: postgresql_ilmac
  - 각 데이터베이스마다 host, port, user, password, description 포함

  2. ✅ Databases API 엔드포인트

  /var/services/homes/jungsam/dockers/_manager/api/src/routes/databases.ts
  - GET /api/databases - 모든 데이터베이스 조회
  - GET /api/databases/mysql - MySQL 목록
  - GET /api/databases/postgresql - PostgreSQL 목록

  3. ✅ Platform 인터페이스 확장

  - mysqlId 및 postgresqlId 필드 추가
  - 선택한 데이터베이스 ID 저장

  4. ✅ PlatformModal UI 개선

  Create 모드에서 추가된 기능:
  - Default Database Type 선택: MySQL 또는 PostgreSQL
  - 데이터베이스 선택 드롭다운:
    - MySQL 선택 시 → mysql_ilmac, mysql_home 중 선택
    - PostgreSQL 선택 시 → postgresql_ilmac 선택
  - Slide 방식 정보 표시:
    - 데이터베이스 선택하면 아래에 상세 정보 표시
    - Host, Port, Description 표시
    - 회색 배경 박스로 구분

  Edit 모드:
  - Advanced Settings에서 기존 설정 확인 가능

  5. ✅ 작동 방식

  Platform 생성 시:
  1. GitHub User 선택
  2. Default Database Type 선택 (PostgreSQL/MySQL)
  3. 해당 타입의 데이터베이스 목록에서 선택
  4. 선택한 데이터베이스의 상세 정보가 슬라이드 형식으로 아래에 표시
  5. Create 버튼 클릭

  향후 확장:
  - databases.json에 데이터베이스를 추가하면 자동으로 선택 가능
  - 2개 이상의 MySQL 또는 PostgreSQL이 있을 때 유용하게 선택 가능

  이제 서버를 재시작하시면 Platform 생성 시 데이터베이스를 선택할 수 있고,
  선택한 데이터베이스의 상세 정보가 슬라이드 형식으로 표시됩니다!

===

 /var/services/homes/jungsam/dockers/_manager/data/servers.json 에는 프로젝트별로 사용되는 서버(backend, graphql, frontend 등)의 정보를 저장하고 CRUD에 사용하려고 합니다. 향후 프로젝트 생성시 설정합니다.

아래의 파일들을 참고하여, 현재 프로젝트에 대해 샘플 데이터를 생성해주세요.
- /var/services/homes/jungsam/dockers/_settings/projects/.env.ubuntu-test-2_project-1
- /var/services/homes/jungsam/dockers/_settings/projects/.env.ubuntu-test-2_test-project-1

===
- /var/services/homes/jungsam/dockers/_manager/data/servers.json 에서 서버들은 플랫폼/프로젝트에 귀속되어 있으므로 플랫폼/프로젝트의 이름으로 검색할 수 있어야 합니다. 즉 platform, project id 필드를 가지고 있어야 합니다. /var/services/homes/jungsam/dockers/_manager/data/projects.json 파일에 있는 프로젝트를 참고하여 servers.json를 수정해주세요.

- 프로젝트 생성시 서버 정보를 입력할 수 있도록 해주세요. 입력 서버 정보 형식은 /var/services/homes/jungsam/dockers/_manager/data/servers.json 을 참고해주세요.

- http://1.231.118.217:20100 에서 상단(해더)에 settings 메뉴를 추가해주세요.
  - settings에서는 databases, gitusers, servers에 대한 목록, CRUD가 가능하도록 해주세요. 각 기능은 탭으로 섹션이 분리되도록 해주세요.

===
- http://1.231.118.217:20100 에서 상단(해더)에 servers 메뉴를 추가해주세요.
  - servers에서는 projectServers(/var/services/homes/jungsam/dockers/_manager/data/servers.json)에 대한 목록, CRUD가 가능하도록 해주세요. 특히 port가 중복된 경우는 경고 메시지가 뜨도록 해주세요.
 